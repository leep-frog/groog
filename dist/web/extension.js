(()=>{"use strict";var e={392:(e,t,o)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Emacs=t.deleteCommands=t.cursorMoves=void 0;const r=o(496),i=o(35),n=o(561),s=o(524),a=o(96);t.cursorMoves=["cursorUp","cursorDown","cursorLeft","cursorRight","cursorHome","cursorEnd","cursorWordLeft","cursorWordRight","cursorTop","cursorBottom"];const d=["cancelSelection","closeFindWidget","closeParameterHints","removeSecondaryCursors"];t.deleteCommands=["deleteLeft","deleteRight","deleteWordLeft","deleteWordRight"];class c{constructor(e){this.key=e}get(e){return e.globalState.get(this.key)}update(e,t){e.globalState.update(this.key,t)}}t.Emacs=class{constructor(){this.qmk=new c("groog.keys.qmkState"),this.recorder=new i.Recorder,this.typeHandlers=[new s.FindHandler,new n.MarkHandler,this.recorder]}register(e){for(var o of t.cursorMoves){const t=o;this.recorder.registerCommand(e,o,(()=>this.move(t)))}for(var i of t.deleteCommands){const t=i;this.recorder.registerCommand(e,t,(()=>this.delCommand(t)))}for(var n of(e.subscriptions.push(r.commands.registerCommand("type",((...e)=>{this.type(...e)}))),this.recorder.registerCommand(e,"jump",(()=>this.jump())),this.recorder.registerCommand(e,"fall",(()=>this.fall())),this.recorder.registerCommand(e,"toggleQMK",(()=>this.toggleQMK(e))),this.recorder.registerCommand(e,"yank",(()=>this.yank())),this.recorder.registerCommand(e,"kill",(()=>this.kill())),this.recorder.registerCommand(e,"ctrlG",(()=>this.ctrlG())),this.typeHandlers))n.register(e,this.recorder);this.recorder.registerCommand(e,"multiCommand.execute",a.multiCommand),this.setQMK(e,this.qmk.get(e))}runHandlers(e,t){let o=!0;for(var r of this.typeHandlers)r.active&&(e(r)||(o=!1));o&&t()}type(...e){r.window.activeTextEditor||r.window.showInformationMessage("NOT TEXT EDITOR?!?!");let t=e[0].text;this.runHandlers((e=>e.textHandler(t)),(()=>{r.commands.executeCommand("default:type",...e)}))}delCommand(e){this.runHandlers((t=>t.delHandler(e)),(()=>{r.commands.executeCommand(e)}))}toggleQMK(e){this.setQMK(e,!this.qmk.get(e))}setQMK(e,t){let o=t||!1;o?r.window.showInformationMessage("QMK keyboard mode activated"):r.window.showInformationMessage("Basic keyboard mode activated"),this.qmk.update(e,o),r.commands.executeCommand("setContext","groog.qmk",o)}yank(){var e,t,o;let i=null===(e=r.window.activeTextEditor)||void 0===e?void 0:e.selection,n=null===(t=r.window.activeTextEditor)||void 0===t?void 0:t.document.getText(i);for(var s of(n&&(null===(o=r.window.activeTextEditor)||void 0===o||o.edit((e=>{i&&e.delete(i)}))),this.typeHandlers))(s.active||s.alwaysOnYank())&&s.onYank(n)}ctrlG(){for(var e of this.typeHandlers)e.active&&e.ctrlG();for(var t of d)r.commands.executeCommand(t)}kill(){var e;let t=r.window.activeTextEditor;if(!t)return;let o=t.selection.active,i=t.document.lineAt(o.line).range.end,n=new r.Range(o,i),s=t.document.getText(n);for(var a of(0===s.trim().length&&(n=new r.Range(o,new r.Position(o.line+1,0))),this.typeHandlers))(a.active||a.alwaysOnKill())&&a.onKill(s);null===(e=r.window.activeTextEditor)||void 0===e||e.edit((e=>{e.delete(n)}))}jump(){this.move("cursorMove",{to:"up",by:"line",value:10})}fall(){this.move("cursorMove",{to:"down",by:"line",value:10})}move(e,...t){this.runHandlers((o=>o.moveHandler(e,...t)),(()=>{r.commands.executeCommand(e,...t)}))}}},524:(e,t,o)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.FindHandler=void 0;const r=o(496);t.FindHandler=class{constructor(){this.active=!1,this.findText="",this.cursorStack=new i}cursorToFront(){let e=r.window.activeTextEditor;if(e){let t=e.selection.start;e.selection=new r.Selection(t,t)}}nextMatch(){r.commands.executeCommand("editor.action.nextMatchFindAction")}prevMatch(){r.commands.executeCommand("editor.action.previousMatchFindAction")}register(e,t){t.registerCommand(e,"find",(()=>{this.active?this.nextMatch():this.activate()})),t.registerCommand(e,"reverseFind",(()=>{this.active?this.prevMatch():this.activate()})),r.window.onDidChangeActiveTextEditor((()=>{this.deactivate()}))}activate(){this.active=!0,r.commands.executeCommand("setContext","groog.findMode",!0),this.findWithArgs()}deactivate(){this.active=!1,r.commands.executeCommand("setContext","groog.findMode",!1),this.findText="",this.cursorStack.clear(),r.commands.executeCommand("cancelSelection"),r.commands.executeCommand("closeFindWidget")}findWithArgs(){let e=this.findText;0===this.findText.length&&(e="ENTER_TEXT"),r.commands.executeCommand("editor.actions.findWithArgs",{searchString:e}).then((()=>{r.commands.executeCommand("workbench.action.focusActiveEditorGroup")}),(()=>{r.commands.executeCommand("workbench.action.focusActiveEditorGroup")})),this.cursorToFront(),this.nextMatch()}ctrlG(){this.deactivate()}textHandler(e){return this.findText=this.findText.concat(e),this.cursorStack.push(),this.findWithArgs(),!1}moveHandler(e){return this.deactivate(),!0}delHandler(e){return"deleteLeft"===e?(this.findText=this.findText.slice(0,this.findText.length-1),this.cursorStack.popAndSet(),this.findWithArgs()):r.window.showInformationMessage("Unsupported find command: "+e),!1}onYank(e){}alwaysOnYank(){return!1}onKill(e){}alwaysOnKill(){return!1}};class i{constructor(){this.selections=[]}push(){let e=r.window.activeTextEditor;if(!e)return r.window.showErrorMessage("Couldn't find active editor"),void this.selections.push(new r.Position(0,0));this.selections.push(new r.Position(e.selection.start.line,e.selection.start.character))}popAndSet(){let e=this.selections.pop();if(!e)return void r.window.showErrorMessage("Ran out of cursor positions");let t=r.window.activeTextEditor;t?t.selection=new r.Selection(e,e):r.window.showErrorMessage("Undefined editor")}clear(){this.selections=[]}}},561:(e,t,o)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.MarkHandler=void 0;const r=o(496);t.MarkHandler=class{constructor(){this.active=!1,this.yanked=""}register(e,t){t.registerCommand(e,"toggleMarkMode",(()=>{this.active?this.deactivate():this.activate()})),t.registerCommand(e,"paste",(()=>{var e;this.active&&this.deactivate(),null===(e=r.window.activeTextEditor)||void 0===e||e.edit((e=>{let t=r.window.activeTextEditor;t&&e.insert(t.selection.active,this.yanked)}))}))}activate(){this.active=!0,r.commands.executeCommand("setContext","groog.markMode",!0)}deactivate(){this.active=!1,r.commands.executeCommand("setContext","groog.markMode",!1)}ctrlG(){this.deactivate()}textHandler(e){return this.deactivate(),!0}moveHandler(e,...t){return"cursorMove"===e?(t[0].select=!0,r.commands.executeCommand(e,...t)):r.commands.executeCommand(e+"Select",...t),!1}delHandler(e){return this.deactivate(),!0}onYank(e){this.deactivate(),this.yanked=e||""}alwaysOnYank(){return!0}onKill(e){this.deactivate(),this.yanked=e||""}alwaysOnKill(){return!0}}},96:(e,t,o)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.multiCommand=void 0;const r=o(496);t.multiCommand=function(e){for(var t of e.sequence)r.commands.executeCommand(t)}},35:(e,t,o)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Recorder=void 0;const r=o(496);t.Recorder=class{constructor(){this.baseCommand=!0,this.active=!1,this.recordBook=[]}register(e,t){t.registerCommand(e,"record.startRecording",(()=>t.startRecording())),t.registerCommand(e,"record.endRecording",(()=>t.endRecording())),t.registerCommand(e,"record.playRecording",(()=>t.playback()))}registerCommand(e,t,o){e.subscriptions.push(r.commands.registerCommand("groog."+t,((...e)=>{this.execute("groog."+t,e,o)})))}execute(e,t,o){if(e.includes("groog.record")||!this.active||!this.baseCommand)return o(...t);this.addRecord(new i(e,t)),this.baseCommand=!1;let r=o(...t);return this.baseCommand=!0,r}startRecording(){this.active?r.window.showInformationMessage("Already recording!"):(this.activate(),this.recordBook=[],r.window.showInformationMessage("Recording started!"))}endRecording(){this.active?(this.deactivate(),r.window.showInformationMessage("Recording ended!")):r.window.showInformationMessage("Not recording!")}playback(){if(this.active)return void r.window.showInformationMessage("Still recording!");r.window.showInformationMessage("Playing recording!");let e=[];for(var t of this.recordBook)e.push(t.command),r.commands.executeCommand(t.command,...t.args)}activate(){this.active=!0,r.commands.executeCommand("setContext","groog.recording",!0)}deactivate(){this.active=!1,r.commands.executeCommand("setContext","groog.recording",!1)}addRecord(e){this.recordBook=this.recordBook.concat(e)}textHandler(e){return this.addRecord(new i("type",[{text:e}])),!0}onKill(e){}alwaysOnKill(){return!1}ctrlG(){}onYank(e){}alwaysOnYank(){return!1}delHandler(e){return!0}moveHandler(e,...t){return!0}};class i{constructor(e,t){this.command=e,this.args=t}}},496:e=>{e.exports=require("vscode")}},t={};function o(r){var i=t[r];if(void 0!==i)return i.exports;var n=t[r]={exports:{}};return e[r](n,n.exports,o),n.exports}var r={};(()=>{var e=r;Object.defineProperty(e,"__esModule",{value:!0}),e.deactivate=e.activate=void 0;const t=new(o(392).Emacs);e.activate=function(e){t.register(e)},e.deactivate=function(){}})();var i=exports;for(var n in r)i[n]=r[n];r.__esModule&&Object.defineProperty(i,"__esModule",{value:!0})})();