/*!--------------------------------------------------------
 * Copyright (C) Microsoft Corporation. All rights reserved.
 *--------------------------------------------------------*/(function(){var te=["require","exports","vs/base/common/strings","vs/base/common/platform","vs/base/common/path","vs/base/common/lifecycle","vs/base/common/buffer","vs/base/common/extpath","vs/base/common/network","vs/base/common/uri","vs/editor/common/model/pieceTreeTextBuffer/pieceTreeBase","vs/editor/common/core/range","vs/base/common/mime","vs/base/common/stream","vs/base/common/errors","vs/base/common/map","vs/base/common/resources","vs/base/common/async","vs/base/common/event","vs/base/common/glob","vs/editor/common/core/eolCounter","vs/editor/common/core/stringBuilder","vs/editor/common/core/textChange","vs/editor/common/model/pieceTreeTextBuffer/rbTreeBase","vs/editor/common/model","vs/editor/common/model/pieceTreeTextBuffer/pieceTreeTextBuffer","vs/editor/common/model/pieceTreeTextBuffer/pieceTreeTextBufferBuilder","vs/platform/instantiation/common/instantiation","vs/platform/contextkey/common/contextkey","vs/workbench/contrib/notebook/common/notebookCommon","vs/base/common/arrays","vs/base/common/types","vs/base/common/cancellation","vs/editor/common/core/position","vs/editor/common/model/textModelSearch","vs/base/common/iterator","vs/workbench/contrib/notebook/common/services/notebookSimpleWorker","vs/base/common/diff/diff","vs/base/common/hash"],ne=function(J){for(var e=[],A=0,q=J.length;A<q;A++)e[A]=te[J[A]];return e};define(te[12],ne([0,1,4]),function(J,e,A){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.normalizeMimeType=e.getExtensionForMimeType=e.getMediaMime=e.getMediaOrTextMime=e.Mimes=void 0;var q;(function(P){P.text="text/plain",P.binary="application/octet-stream",P.unknown="application/unknown",P.markdown="text/markdown",P.latex="text/latex"})(q=e.Mimes||(e.Mimes={}));const M={".css":"text/css",".csv":"text/csv",".htm":"text/html",".html":"text/html",".ics":"text/calendar",".js":"text/javascript",".mjs":"text/javascript",".txt":"text/plain",".xml":"text/xml"},I={".aac":"audio/x-aac",".avi":"video/x-msvideo",".bmp":"image/bmp",".flv":"video/x-flv",".gif":"image/gif",".ico":"image/x-icon",".jpe":"image/jpg",".jpeg":"image/jpg",".jpg":"image/jpg",".m1v":"video/mpeg",".m2a":"audio/mpeg",".m2v":"video/mpeg",".m3a":"audio/mpeg",".mid":"audio/midi",".midi":"audio/midi",".mk3d":"video/x-matroska",".mks":"video/x-matroska",".mkv":"video/x-matroska",".mov":"video/quicktime",".movie":"video/x-sgi-movie",".mp2":"audio/mpeg",".mp2a":"audio/mpeg",".mp3":"audio/mpeg",".mp4":"video/mp4",".mp4a":"audio/mp4",".mp4v":"video/mp4",".mpe":"video/mpeg",".mpeg":"video/mpeg",".mpg":"video/mpeg",".mpg4":"video/mp4",".mpga":"audio/mpeg",".oga":"audio/ogg",".ogg":"audio/ogg",".opus":"audio/opus",".ogv":"video/ogg",".png":"image/png",".psd":"image/vnd.adobe.photoshop",".qt":"video/quicktime",".spx":"audio/ogg",".svg":"image/svg+xml",".tga":"image/x-tga",".tif":"image/tiff",".tiff":"image/tiff",".wav":"audio/x-wav",".webm":"video/webm",".webp":"image/webp",".wma":"audio/x-ms-wma",".wmv":"video/x-ms-wmv",".woff":"application/font-woff"};function O(P){const b=(0,A.extname)(P),T=M[b.toLowerCase()];return T!==void 0?T:D(P)}e.getMediaOrTextMime=O;function D(P){const b=(0,A.extname)(P);return I[b.toLowerCase()]}e.getMediaMime=D;function B(P){for(const b in I)if(I[b]===P)return b}e.getExtensionForMimeType=B;const L=/^(.+)\/(.+?)(;.+)?$/;function S(P,b){const T=L.exec(P);return T?`${T[1].toLowerCase()}/${T[2].toLowerCase()}${T[3]??""}`:b?void 0:P}e.normalizeMimeType=S}),define(te[13],ne([0,1,14,5]),function(J,e,A,q){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.prefixedStream=e.prefixedReadable=e.transform=e.toReadable=e.emptyStream=e.toStream=e.peekStream=e.listenStream=e.consumeStream=e.peekReadable=e.consumeReadable=e.newWriteableStream=e.isReadableBufferedStream=e.isReadableStream=void 0;function M(i){const s=i;return s?[s.on,s.pause,s.resume,s.destroy].every(d=>typeof d=="function"):!1}e.isReadableStream=M;function I(i){const s=i;return s?M(s.stream)&&Array.isArray(s.buffer)&&typeof s.ended=="boolean":!1}e.isReadableBufferedStream=I;function O(i,s){return new D(i,s)}e.newWriteableStream=O;class D{constructor(s,d){this.reducer=s,this.options=d,this.state={flowing:!1,ended:!1,destroyed:!1},this.buffer={data:[],error:[]},this.listeners={data:[],error:[],end:[]},this.pendingWritePromises=[]}pause(){this.state.destroyed||(this.state.flowing=!1)}resume(){this.state.destroyed||this.state.flowing||(this.state.flowing=!0,this.flowData(),this.flowErrors(),this.flowEnd())}write(s){if(!this.state.destroyed){if(this.state.flowing)this.emitData(s);else if(this.buffer.data.push(s),typeof this.options?.highWaterMark=="number"&&this.buffer.data.length>this.options.highWaterMark)return new Promise(d=>this.pendingWritePromises.push(d))}}error(s){this.state.destroyed||(this.state.flowing?this.emitError(s):this.buffer.error.push(s))}end(s){this.state.destroyed||(typeof s!="undefined"&&this.write(s),this.state.flowing?(this.emitEnd(),this.destroy()):this.state.ended=!0)}emitData(s){this.listeners.data.slice(0).forEach(d=>d(s))}emitError(s){this.listeners.error.length===0?(0,A.onUnexpectedError)(s):this.listeners.error.slice(0).forEach(d=>d(s))}emitEnd(){this.listeners.end.slice(0).forEach(s=>s())}on(s,d){if(!this.state.destroyed)switch(s){case"data":this.listeners.data.push(d),this.resume();break;case"end":this.listeners.end.push(d),this.state.flowing&&this.flowEnd()&&this.destroy();break;case"error":this.listeners.error.push(d),this.state.flowing&&this.flowErrors();break}}removeListener(s,d){if(this.state.destroyed)return;let p;switch(s){case"data":p=this.listeners.data;break;case"end":p=this.listeners.end;break;case"error":p=this.listeners.error;break}if(p){const E=p.indexOf(d);E>=0&&p.splice(E,1)}}flowData(){if(this.buffer.data.length>0){const s=this.reducer(this.buffer.data);this.emitData(s),this.buffer.data.length=0;const d=[...this.pendingWritePromises];this.pendingWritePromises.length=0,d.forEach(p=>p())}}flowErrors(){if(this.listeners.error.length>0){for(const s of this.buffer.error)this.emitError(s);this.buffer.error.length=0}}flowEnd(){return this.state.ended?(this.emitEnd(),this.listeners.end.length>0):!1}destroy(){this.state.destroyed||(this.state.destroyed=!0,this.state.ended=!0,this.buffer.data.length=0,this.buffer.error.length=0,this.listeners.data.length=0,this.listeners.error.length=0,this.listeners.end.length=0,this.pendingWritePromises.length=0)}}function B(i,s){const d=[];let p;for(;(p=i.read())!==null;)d.push(p);return s(d)}e.consumeReadable=B;function L(i,s,d){const p=[];let E;for(;(E=i.read())!==null&&p.length<d;)p.push(E);return E===null&&p.length>0?s(p):{read:()=>{if(p.length>0)return p.shift();if(typeof E!="undefined"){const C=E;return E=void 0,C}return i.read()}}}e.peekReadable=L;function S(i,s){return new Promise((d,p)=>{const E=[];P(i,{onData:C=>{s&&E.push(C)},onError:C=>{s?p(C):d(void 0)},onEnd:()=>{d(s?s(E):void 0)}})})}e.consumeStream=S;function P(i,s){let d=!1;return i.on("error",p=>{d||s.onError(p)}),i.on("end",()=>{d||s.onEnd()}),i.on("data",p=>{d||s.onData(p)}),(0,q.toDisposable)(()=>d=!0)}e.listenStream=P;function b(i,s){return new Promise((d,p)=>{const E=new q.DisposableStore,C=[],o=u=>{if(C.push(u),C.length>s)return E.dispose(),i.pause(),d({stream:i,buffer:C,ended:!1})},l=u=>p(u),h=()=>d({stream:i,buffer:C,ended:!0});E.add((0,q.toDisposable)(()=>i.removeListener("error",l))),i.on("error",l),E.add((0,q.toDisposable)(()=>i.removeListener("end",h))),i.on("end",h),E.add((0,q.toDisposable)(()=>i.removeListener("data",o))),i.on("data",o)})}e.peekStream=b;function T(i,s){const d=O(s);return d.end(i),d}e.toStream=T;function w(){const i=O(()=>{throw new Error("not supported")});return i.end(),i}e.emptyStream=w;function c(i){let s=!1;return{read:()=>s?null:(s=!0,i)}}e.toReadable=c;function a(i,s,d){const p=O(d);return P(i,{onData:E=>p.write(s.data(E)),onError:E=>p.error(s.error?s.error(E):E),onEnd:()=>p.end()}),p}e.transform=a;function t(i,s,d){let p=!1;return{read:()=>{const E=s.read();return p?E:(p=!0,E!==null?d([i,E]):i)}}}e.prefixedReadable=t;function r(i,s,d){let p=!1;const E=O(d);return P(s,{onData:C=>p?E.write(C):(p=!0,E.write(d([i,C]))),onError:C=>E.error(C),onEnd:()=>{p||(p=!0,E.write(i)),E.end()}}),E}e.prefixedStream=r}),define(te[6],ne([0,1,13]),function(J,e,A){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.encodeBase64=e.decodeBase64=e.prefixedBufferStream=e.prefixedBufferReadable=e.newWriteableBufferStream=e.streamToBufferReadableStream=e.bufferToStream=e.bufferedStreamToBuffer=e.streamToBuffer=e.bufferToReadable=e.readableToBuffer=e.writeUInt8=e.readUInt8=e.writeUInt32LE=e.readUInt32LE=e.writeUInt32BE=e.readUInt32BE=e.writeUInt16LE=e.readUInt16LE=e.VSBuffer=void 0;const q=typeof Buffer!="undefined";let M,I;class O{constructor(f){this.buffer=f,this.byteLength=this.buffer.byteLength}static alloc(f){return q?new O(Buffer.allocUnsafe(f)):new O(new Uint8Array(f))}static wrap(f){return q&&!Buffer.isBuffer(f)&&(f=Buffer.from(f.buffer,f.byteOffset,f.byteLength)),new O(f)}static fromString(f,N){return!(N?.dontUseNodeBuffer||!1)&&q?new O(Buffer.from(f)):(M||(M=new TextEncoder),new O(M.encode(f)))}static fromByteArray(f){const N=O.alloc(f.length);for(let m=0,F=f.length;m<F;m++)N.buffer[m]=f[m];return N}static concat(f,N){if(typeof N=="undefined"){N=0;for(let j=0,k=f.length;j<k;j++)N+=f[j].byteLength}const m=O.alloc(N);let F=0;for(let j=0,k=f.length;j<k;j++){const n=f[j];m.set(n,F),F+=n.byteLength}return m}clone(){const f=O.alloc(this.byteLength);return f.set(this),f}toString(){return q?this.buffer.toString():(I||(I=new TextDecoder),I.decode(this.buffer))}slice(f,N){return new O(this.buffer.subarray(f,N))}set(f,N){if(f instanceof O)this.buffer.set(f.buffer,N);else if(f instanceof Uint8Array)this.buffer.set(f,N);else if(f instanceof ArrayBuffer)this.buffer.set(new Uint8Array(f),N);else if(ArrayBuffer.isView(f))this.buffer.set(new Uint8Array(f.buffer,f.byteOffset,f.byteLength),N);else throw new Error("Unknown argument 'array'")}readUInt32BE(f){return L(this.buffer,f)}writeUInt32BE(f,N){S(this.buffer,f,N)}readUInt32LE(f){return P(this.buffer,f)}writeUInt32LE(f,N){b(this.buffer,f,N)}readUInt8(f){return T(this.buffer,f)}writeUInt8(f,N){w(this.buffer,f,N)}}e.VSBuffer=O;function D(u,f){return u[f+0]<<0>>>0|u[f+1]<<8>>>0}e.readUInt16LE=D;function B(u,f,N){u[N+0]=f&255,f=f>>>8,u[N+1]=f&255}e.writeUInt16LE=B;function L(u,f){return u[f]*2**24+u[f+1]*2**16+u[f+2]*2**8+u[f+3]}e.readUInt32BE=L;function S(u,f,N){u[N+3]=f,f=f>>>8,u[N+2]=f,f=f>>>8,u[N+1]=f,f=f>>>8,u[N]=f}e.writeUInt32BE=S;function P(u,f){return u[f+0]<<0>>>0|u[f+1]<<8>>>0|u[f+2]<<16>>>0|u[f+3]<<24>>>0}e.readUInt32LE=P;function b(u,f,N){u[N+0]=f&255,f=f>>>8,u[N+1]=f&255,f=f>>>8,u[N+2]=f&255,f=f>>>8,u[N+3]=f&255}e.writeUInt32LE=b;function T(u,f){return u[f]}e.readUInt8=T;function w(u,f,N){u[N]=f}e.writeUInt8=w;function c(u){return A.consumeReadable(u,f=>O.concat(f))}e.readableToBuffer=c;function a(u){return A.toReadable(u)}e.bufferToReadable=a;function t(u){return A.consumeStream(u,f=>O.concat(f))}e.streamToBuffer=t;async function r(u){return u.ended?O.concat(u.buffer):O.concat([...u.buffer,await t(u.stream)])}e.bufferedStreamToBuffer=r;function i(u){return A.toStream(u,f=>O.concat(f))}e.bufferToStream=i;function s(u){return A.transform(u,{data:f=>typeof f=="string"?O.fromString(f):O.wrap(f)},f=>O.concat(f))}e.streamToBufferReadableStream=s;function d(u){return A.newWriteableStream(f=>O.concat(f),u)}e.newWriteableBufferStream=d;function p(u,f){return A.prefixedReadable(u,f,N=>O.concat(N))}e.prefixedBufferReadable=p;function E(u,f){return A.prefixedStream(u,f,N=>O.concat(N))}e.prefixedBufferStream=E;function C(u){let f=0,N=0,m=0;const F=new Uint8Array(Math.floor(u.length/4*3)),j=n=>{switch(N){case 3:F[m++]=f|n,N=0;break;case 2:F[m++]=f|n>>>2,f=n<<6,N=3;break;case 1:F[m++]=f|n>>>4,f=n<<4,N=2;break;default:f=n<<2,N=1}};for(let n=0;n<u.length;n++){const _=u.charCodeAt(n);if(_>=65&&_<=90)j(_-65);else if(_>=97&&_<=122)j(_-97+26);else if(_>=48&&_<=57)j(_-48+52);else if(_===43||_===45)j(62);else if(_===47||_===95)j(63);else{if(_===61)break;throw new SyntaxError(`Unexpected base64 character ${u[n]}`)}}const k=m;for(;N>0;)j(0);return O.wrap(F).slice(0,k)}e.decodeBase64=C;const o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",l="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_";function h({buffer:u},f=!0,N=!1){const m=N?l:o;let F="";const j=u.byteLength%3;let k=0;for(;k<u.byteLength-j;k+=3){const n=u[k+0],_=u[k+1],v=u[k+2];F+=m[n>>>2],F+=m[(n<<4|_>>>4)&63],F+=m[(_<<2|v>>>6)&63],F+=m[v&63]}if(j===1){const n=u[k+0];F+=m[n>>>2],F+=m[n<<4&63],f&&(F+="==")}else if(j===2){const n=u[k+0],_=u[k+1];F+=m[n>>>2],F+=m[(n<<4|_>>>4)&63],F+=m[_<<2&63],f&&(F+="=")}return F}e.encodeBase64=h});var ae=this&&this.__classPrivateFieldSet||function(J,e,A,q,M){if(q==="m")throw new TypeError("Private method is not writable");if(q==="a"&&!M)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?J!==e||!M:!e.has(J))throw new TypeError("Cannot write private member to an object whose class did not declare it");return q==="a"?M.call(J,A):M?M.value=A:e.set(J,A),A},se=this&&this.__classPrivateFieldGet||function(J,e,A,q){if(A==="a"&&!q)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?J!==e||!q:!e.has(J))throw new TypeError("Cannot read private member from an object whose class did not declare it");return A==="m"?q:A==="a"?q.call(J):q?q.value:e.get(J)};define(te[15],ne([0,1,30,2]),function(J,e,A,q){"use strict";var M,I,O;Object.defineProperty(e,"__esModule",{value:!0}),e.ReadonlyMapView=e.LRUCache=e.LinkedMap=e.Touch=e.ResourceMap=e.TernarySearchTree=e.UriIterator=e.PathIterator=e.ConfigKeysIterator=e.StringIterator=e.setToString=e.mapToString=e.getOrSet=void 0;function D(C,o,l){let h=C.get(o);return h===void 0&&(h=l,C.set(o,h)),h}e.getOrSet=D;function B(C){const o=[];return C.forEach((l,h)=>{o.push(`${h} => ${l}`)}),`Map(${C.size}) {${o.join(", ")}}`}e.mapToString=B;function L(C){const o=[];return C.forEach(l=>{o.push(l)}),`Set(${C.size}) {${o.join(", ")}}`}e.setToString=L;class S{constructor(){this._value="",this._pos=0}reset(o){return this._value=o,this._pos=0,this}next(){return this._pos+=1,this}hasNext(){return this._pos<this._value.length-1}cmp(o){const l=o.charCodeAt(0),h=this._value.charCodeAt(this._pos);return l-h}value(){return this._value[this._pos]}}e.StringIterator=S;class P{constructor(o=!0){this._caseSensitive=o}reset(o){return this._value=o,this._from=0,this._to=0,this.next()}hasNext(){return this._to<this._value.length}next(){this._from=this._to;let o=!0;for(;this._to<this._value.length;this._to++)if(this._value.charCodeAt(this._to)===46)if(o)this._from++;else break;else o=!1;return this}cmp(o){return this._caseSensitive?(0,q.compareSubstring)(o,this._value,0,o.length,this._from,this._to):(0,q.compareSubstringIgnoreCase)(o,this._value,0,o.length,this._from,this._to)}value(){return this._value.substring(this._from,this._to)}}e.ConfigKeysIterator=P;class b{constructor(o=!0,l=!0){this._splitOnBackslash=o,this._caseSensitive=l}reset(o){this._from=0,this._to=0,this._value=o,this._valueLen=o.length;for(let l=o.length-1;l>=0;l--,this._valueLen--){const h=this._value.charCodeAt(l);if(!(h===47||this._splitOnBackslash&&h===92))break}return this.next()}hasNext(){return this._to<this._valueLen}next(){this._from=this._to;let o=!0;for(;this._to<this._valueLen;this._to++){const l=this._value.charCodeAt(this._to);if(l===47||this._splitOnBackslash&&l===92)if(o)this._from++;else break;else o=!1}return this}cmp(o){return this._caseSensitive?(0,q.compareSubstring)(o,this._value,0,o.length,this._from,this._to):(0,q.compareSubstringIgnoreCase)(o,this._value,0,o.length,this._from,this._to)}value(){return this._value.substring(this._from,this._to)}}e.PathIterator=b;var T;(function(C){C[C.Scheme=1]="Scheme",C[C.Authority=2]="Authority",C[C.Path=3]="Path",C[C.Query=4]="Query",C[C.Fragment=5]="Fragment"})(T||(T={}));class w{constructor(o){this._ignorePathCasing=o,this._states=[],this._stateIdx=0}reset(o){return this._value=o,this._states=[],this._value.scheme&&this._states.push(1),this._value.authority&&this._states.push(2),this._value.path&&(this._pathIterator=new b(!1,!this._ignorePathCasing(o)),this._pathIterator.reset(o.path),this._pathIterator.value()&&this._states.push(3)),this._value.query&&this._states.push(4),this._value.fragment&&this._states.push(5),this._stateIdx=0,this}next(){return this._states[this._stateIdx]===3&&this._pathIterator.hasNext()?this._pathIterator.next():this._stateIdx+=1,this}hasNext(){return this._states[this._stateIdx]===3&&this._pathIterator.hasNext()||this._stateIdx<this._states.length-1}cmp(o){if(this._states[this._stateIdx]===1)return(0,q.compareIgnoreCase)(o,this._value.scheme);if(this._states[this._stateIdx]===2)return(0,q.compareIgnoreCase)(o,this._value.authority);if(this._states[this._stateIdx]===3)return this._pathIterator.cmp(o);if(this._states[this._stateIdx]===4)return(0,q.compare)(o,this._value.query);if(this._states[this._stateIdx]===5)return(0,q.compare)(o,this._value.fragment);throw new Error}value(){if(this._states[this._stateIdx]===1)return this._value.scheme;if(this._states[this._stateIdx]===2)return this._value.authority;if(this._states[this._stateIdx]===3)return this._pathIterator.value();if(this._states[this._stateIdx]===4)return this._value.query;if(this._states[this._stateIdx]===5)return this._value.fragment;throw new Error}}e.UriIterator=w;class c{constructor(){this.height=1}isEmpty(){return!this.left&&!this.mid&&!this.right&&!this.value}rotateLeft(){const o=this.right;return this.right=o.left,o.left=this,this.updateHeight(),o.updateHeight(),o}rotateRight(){const o=this.left;return this.left=o.right,o.right=this,this.updateHeight(),o.updateHeight(),o}updateHeight(){this.height=1+Math.max(this.heightLeft,this.heightRight)}balanceFactor(){return this.heightRight-this.heightLeft}get heightLeft(){return this.left?.height??0}get heightRight(){return this.right?.height??0}}var a;(function(C){C[C.Left=-1]="Left",C[C.Mid=0]="Mid",C[C.Right=1]="Right"})(a||(a={}));class t{constructor(o){this._iter=o}static forUris(o=()=>!1){return new t(new w(o))}static forPaths(o=!1){return new t(new b(void 0,!o))}static forStrings(){return new t(new S)}static forConfigKeys(){return new t(new P)}clear(){this._root=void 0}fill(o,l){if(l){const h=l.slice(0);(0,A.shuffle)(h);for(let u of h)this.set(u,o)}else{const h=o.slice(0);(0,A.shuffle)(h);for(let u of h)this.set(u[0],u[1])}}set(o,l){const h=this._iter.reset(o);let u;this._root||(this._root=new c,this._root.segment=h.value());const f=[];for(u=this._root;;){const m=h.cmp(u.segment);if(m>0)u.left||(u.left=new c,u.left.segment=h.value()),f.push([-1,u]),u=u.left;else if(m<0)u.right||(u.right=new c,u.right.segment=h.value()),f.push([1,u]),u=u.right;else if(h.hasNext())h.next(),u.mid||(u.mid=new c,u.mid.segment=h.value()),f.push([0,u]),u=u.mid;else break}const N=u.value;u.value=l,u.key=o;for(let m=f.length-1;m>=0;m--){const F=f[m][1];F.updateHeight();const j=F.balanceFactor();if(j<-1||j>1){const k=f[m][0],n=f[m+1][0];if(k===1&&n===1)f[m][1]=F.rotateLeft();else if(k===-1&&n===-1)f[m][1]=F.rotateRight();else if(k===1&&n===-1)F.right=f[m+1][1]=f[m+1][1].rotateRight(),f[m][1]=F.rotateLeft();else if(k===-1&&n===1)F.left=f[m+1][1]=f[m+1][1].rotateLeft(),f[m][1]=F.rotateRight();else throw new Error;if(m>0)switch(f[m-1][0]){case-1:f[m-1][1].left=f[m][1];break;case 1:f[m-1][1].right=f[m][1];break;case 0:f[m-1][1].mid=f[m][1];break}else this._root=f[0][1]}}return N}get(o){return this._getNode(o)?.value}_getNode(o){const l=this._iter.reset(o);let h=this._root;for(;h;){const u=l.cmp(h.segment);if(u>0)h=h.left;else if(u<0)h=h.right;else if(l.hasNext())l.next(),h=h.mid;else break}return h}has(o){const l=this._getNode(o);return!(l?.value===void 0&&l?.mid===void 0)}delete(o){return this._delete(o,!1)}deleteSuperstr(o){return this._delete(o,!0)}_delete(o,l){const h=this._iter.reset(o),u=[];let f=this._root;for(;f;){const N=h.cmp(f.segment);if(N>0)u.push([-1,f]),f=f.left;else if(N<0)u.push([1,f]),f=f.right;else if(h.hasNext())h.next(),u.push([0,f]),f=f.mid;else break}if(!!f){if(l?(f.left=void 0,f.mid=void 0,f.right=void 0,f.height=1):(f.key=void 0,f.value=void 0),!f.mid&&!f.value)if(f.left&&f.right){const N=this._min(f.right),{key:m,value:F,segment:j}=N;this._delete(N.key,!1),f.key=m,f.value=F,f.segment=j}else{const N=f.left??f.right;if(u.length>0){const[m,F]=u[u.length-1];switch(m){case-1:F.left=N;break;case 0:F.mid=N;break;case 1:F.right=N;break}}else this._root=N}for(let N=u.length-1;N>=0;N--){const m=u[N][1];m.updateHeight();const F=m.balanceFactor();if(F>1?(m.right.balanceFactor()>=0||(m.right=m.right.rotateRight()),u[N][1]=m.rotateLeft()):F<-1&&(m.left.balanceFactor()<=0||(m.left=m.left.rotateLeft()),u[N][1]=m.rotateRight()),N>0)switch(u[N-1][0]){case-1:u[N-1][1].left=u[N][1];break;case 1:u[N-1][1].right=u[N][1];break;case 0:u[N-1][1].mid=u[N][1];break}else this._root=u[0][1]}}}_min(o){for(;o.left;)o=o.left;return o}findSubstr(o){const l=this._iter.reset(o);let h=this._root,u;for(;h;){const f=l.cmp(h.segment);if(f>0)h=h.left;else if(f<0)h=h.right;else if(l.hasNext())l.next(),u=h.value||u,h=h.mid;else break}return h&&h.value||u}findSuperstr(o){const l=this._iter.reset(o);let h=this._root;for(;h;){const u=l.cmp(h.segment);if(u>0)h=h.left;else if(u<0)h=h.right;else if(l.hasNext())l.next(),h=h.mid;else return h.mid?this._entries(h.mid):void 0}}forEach(o){for(const[l,h]of this)o(h,l)}*[Symbol.iterator](){yield*this._entries(this._root)}*_entries(o){!o||(o.left&&(yield*this._entries(o.left)),o.value&&(yield[o.key,o.value]),o.mid&&(yield*this._entries(o.mid)),o.right&&(yield*this._entries(o.right)))}_isBalanced(){const o=l=>{if(!l)return!0;const h=l.balanceFactor();return h<-1||h>1?!1:o(l.left)&&o(l.right)};return o(this._root)}}e.TernarySearchTree=t;class r{constructor(o,l){this.uri=o,this.value=l}}class i{constructor(o,l){this[M]="ResourceMap",o instanceof i?(this.map=new Map(o.map),this.toKey=l??i.defaultToKey):(this.map=new Map,this.toKey=o??i.defaultToKey)}set(o,l){return this.map.set(this.toKey(o),new r(o,l)),this}get(o){return this.map.get(this.toKey(o))?.value}has(o){return this.map.has(this.toKey(o))}get size(){return this.map.size}clear(){this.map.clear()}delete(o){return this.map.delete(this.toKey(o))}forEach(o,l){typeof l!="undefined"&&(o=o.bind(l));for(let[h,u]of this.map)o(u.value,u.uri,this)}*values(){for(let o of this.map.values())yield o.value}*keys(){for(let o of this.map.values())yield o.uri}*entries(){for(let o of this.map.values())yield[o.uri,o.value]}*[(M=Symbol.toStringTag,Symbol.iterator)](){for(let[,o]of this.map)yield[o.uri,o.value]}}e.ResourceMap=i,i.defaultToKey=C=>C.toString();var s;(function(C){C[C.None=0]="None",C[C.AsOld=1]="AsOld",C[C.AsNew=2]="AsNew"})(s=e.Touch||(e.Touch={}));class d{constructor(){this[I]="LinkedMap",this._map=new Map,this._head=void 0,this._tail=void 0,this._size=0,this._state=0}clear(){this._map.clear(),this._head=void 0,this._tail=void 0,this._size=0,this._state++}isEmpty(){return!this._head&&!this._tail}get size(){return this._size}get first(){return this._head?.value}get last(){return this._tail?.value}has(o){return this._map.has(o)}get(o,l=0){const h=this._map.get(o);if(!!h)return l!==0&&this.touch(h,l),h.value}set(o,l,h=0){let u=this._map.get(o);if(u)u.value=l,h!==0&&this.touch(u,h);else{switch(u={key:o,value:l,next:void 0,previous:void 0},h){case 0:this.addItemLast(u);break;case 1:this.addItemFirst(u);break;case 2:this.addItemLast(u);break;default:this.addItemLast(u);break}this._map.set(o,u),this._size++}return this}delete(o){return!!this.remove(o)}remove(o){const l=this._map.get(o);if(!!l)return this._map.delete(o),this.removeItem(l),this._size--,l.value}shift(){if(!this._head&&!this._tail)return;if(!this._head||!this._tail)throw new Error("Invalid list");const o=this._head;return this._map.delete(o.key),this.removeItem(o),this._size--,o.value}forEach(o,l){const h=this._state;let u=this._head;for(;u;){if(l?o.bind(l)(u.value,u.key,this):o(u.value,u.key,this),this._state!==h)throw new Error("LinkedMap got modified during iteration.");u=u.next}}keys(){const o=this,l=this._state;let h=this._head;const u={[Symbol.iterator](){return u},next(){if(o._state!==l)throw new Error("LinkedMap got modified during iteration.");if(h){const f={value:h.key,done:!1};return h=h.next,f}else return{value:void 0,done:!0}}};return u}values(){const o=this,l=this._state;let h=this._head;const u={[Symbol.iterator](){return u},next(){if(o._state!==l)throw new Error("LinkedMap got modified during iteration.");if(h){const f={value:h.value,done:!1};return h=h.next,f}else return{value:void 0,done:!0}}};return u}entries(){const o=this,l=this._state;let h=this._head;const u={[Symbol.iterator](){return u},next(){if(o._state!==l)throw new Error("LinkedMap got modified during iteration.");if(h){const f={value:[h.key,h.value],done:!1};return h=h.next,f}else return{value:void 0,done:!0}}};return u}[(I=Symbol.toStringTag,Symbol.iterator)](){return this.entries()}trimOld(o){if(o>=this.size)return;if(o===0){this.clear();return}let l=this._head,h=this.size;for(;l&&h>o;)this._map.delete(l.key),l=l.next,h--;this._head=l,this._size=h,l&&(l.previous=void 0),this._state++}addItemFirst(o){if(!this._head&&!this._tail)this._tail=o;else if(this._head)o.next=this._head,this._head.previous=o;else throw new Error("Invalid list");this._head=o,this._state++}addItemLast(o){if(!this._head&&!this._tail)this._head=o;else if(this._tail)o.previous=this._tail,this._tail.next=o;else throw new Error("Invalid list");this._tail=o,this._state++}removeItem(o){if(o===this._head&&o===this._tail)this._head=void 0,this._tail=void 0;else if(o===this._head){if(!o.next)throw new Error("Invalid list");o.next.previous=void 0,this._head=o.next}else if(o===this._tail){if(!o.previous)throw new Error("Invalid list");o.previous.next=void 0,this._tail=o.previous}else{const l=o.next,h=o.previous;if(!l||!h)throw new Error("Invalid list");l.previous=h,h.next=l}o.next=void 0,o.previous=void 0,this._state++}touch(o,l){if(!this._head||!this._tail)throw new Error("Invalid list");if(!(l!==1&&l!==2)){if(l===1){if(o===this._head)return;const h=o.next,u=o.previous;o===this._tail?(u.next=void 0,this._tail=u):(h.previous=u,u.next=h),o.previous=void 0,o.next=this._head,this._head.previous=o,this._head=o,this._state++}else if(l===2){if(o===this._tail)return;const h=o.next,u=o.previous;o===this._head?(h.previous=void 0,this._head=h):(h.previous=u,u.next=h),o.next=void 0,o.previous=this._tail,this._tail.next=o,this._tail=o,this._state++}}}toJSON(){const o=[];return this.forEach((l,h)=>{o.push([h,l])}),o}fromJSON(o){this.clear();for(const[l,h]of o)this.set(l,h)}}e.LinkedMap=d;class p extends d{constructor(o,l=1){super();this._limit=o,this._ratio=Math.min(Math.max(0,l),1)}get limit(){return this._limit}set limit(o){this._limit=o,this.checkTrim()}get ratio(){return this._ratio}set ratio(o){this._ratio=Math.min(Math.max(0,o),1),this.checkTrim()}get(o,l=2){return super.get(o,l)}peek(o){return super.get(o,0)}set(o,l){return super.set(o,l,2),this.checkTrim(),this}checkTrim(){this.size>this._limit&&this.trimOld(Math.round(this._limit*this._ratio))}}e.LRUCache=p;class E{constructor(o){O.set(this,void 0),ae(this,O,o,"f")}get size(){return se(this,O,"f").size}forEach(o,l){se(this,O,"f").forEach(o,l)}get(o){return se(this,O,"f").get(o)}has(o){return se(this,O,"f").has(o)}entries(){return se(this,O,"f").entries()}keys(){return se(this,O,"f").keys()}values(){return se(this,O,"f").values()}[(O=new WeakMap,Symbol.iterator)](){return se(this,O,"f").entries()}}e.ReadonlyMapView=E}),define(te[7],ne([0,1,4,3,2,31]),function(J,e,A,q,M,I){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.randomPath=e.parseLineAndColumnAware=e.indexOfPath=e.getDriveLetter=e.hasDriveLetter=e.isRootOrDriveLetter=e.sanitizeFilePath=e.isWindowsDriveLetter=e.isEqualOrParent=e.isEqual=e.isValidBasename=e.isUNC=e.getRoot=e.toPosixPath=e.toSlashes=e.isPathSeparator=void 0;function O(l){return l===47||l===92}e.isPathSeparator=O;function D(l){return l.replace(/[\\/]/g,A.posix.sep)}e.toSlashes=D;function B(l){return l.indexOf("/")===-1&&(l=D(l)),/^[a-zA-Z]:(\/|$)/.test(l)&&(l="/"+l),l}e.toPosixPath=B;function L(l,h=A.posix.sep){if(!l)return"";const u=l.length,f=l.charCodeAt(0);if(O(f)){if(O(l.charCodeAt(1))&&!O(l.charCodeAt(2))){let m=3;const F=m;for(;m<u&&!O(l.charCodeAt(m));m++);if(F!==m&&!O(l.charCodeAt(m+1))){for(m+=1;m<u;m++)if(O(l.charCodeAt(m)))return l.slice(0,m+1).replace(/[\\/]/g,h)}}return h}else if(t(f)&&l.charCodeAt(1)===58)return O(l.charCodeAt(2))?l.slice(0,2)+h:l.slice(0,2);let N=l.indexOf("://");if(N!==-1){for(N+=3;N<u;N++)if(O(l.charCodeAt(N)))return l.slice(0,N+1)}return""}e.getRoot=L;function S(l){if(!q.isWindows||!l||l.length<5)return!1;let h=l.charCodeAt(0);if(h!==92||(h=l.charCodeAt(1),h!==92))return!1;let u=2;const f=u;for(;u<l.length&&(h=l.charCodeAt(u),h!==92);u++);return!(f===u||(h=l.charCodeAt(u+1),isNaN(h)||h===92))}e.isUNC=S;const P=/[\\/:\*\?"<>\|]/g,b=/[\\/]/g,T=/^(con|prn|aux|clock\$|nul|lpt[0-9]|com[0-9])(\.(.*?))?$/i;function w(l,h=q.isWindows){const u=h?P:b;return!(!l||l.length===0||/^\s+$/.test(l)||(u.lastIndex=0,u.test(l))||h&&T.test(l)||l==="."||l===".."||h&&l[l.length-1]==="."||h&&l.length!==l.trim().length||l.length>255)}e.isValidBasename=w;function c(l,h,u){const f=l===h;return!u||f?f:!l||!h?!1:(0,M.equalsIgnoreCase)(l,h)}e.isEqual=c;function a(l,h,u,f=A.sep){if(l===h)return!0;if(!l||!h||h.length>l.length)return!1;if(u){if(!(0,M.startsWithIgnoreCase)(l,h))return!1;if(h.length===l.length)return!0;let m=h.length;return h.charAt(h.length-1)===f&&m--,l.charAt(m)===f}return h.charAt(h.length-1)!==f&&(h+=f),l.indexOf(h)===0}e.isEqualOrParent=a;function t(l){return l>=65&&l<=90||l>=97&&l<=122}e.isWindowsDriveLetter=t;function r(l,h){return q.isWindows&&l.endsWith(":")&&(l+=A.sep),(0,A.isAbsolute)(l)||(l=(0,A.join)(h,l)),l=(0,A.normalize)(l),q.isWindows?(l=(0,M.rtrim)(l,A.sep),l.endsWith(":")&&(l+=A.sep)):(l=(0,M.rtrim)(l,A.sep),l||(l=A.sep)),l}e.sanitizeFilePath=r;function i(l){const h=(0,A.normalize)(l);return q.isWindows?l.length>3?!1:s(h)&&(l.length===2||h.charCodeAt(2)===92):h===A.posix.sep}e.isRootOrDriveLetter=i;function s(l,h){return(h!==void 0?h:q.isWindows)?t(l.charCodeAt(0))&&l.charCodeAt(1)===58:!1}e.hasDriveLetter=s;function d(l){return s(l)?l[0]:void 0}e.getDriveLetter=d;function p(l,h,u){return h.length>l.length?-1:l===h?0:(u&&(l=l.toLowerCase(),h=h.toLowerCase()),l.indexOf(h))}e.indexOfPath=p;function E(l){const h=l.split(":");let u,f,N;for(const m of h){const F=Number(m);(0,I.isNumber)(F)?f===void 0?f=F:N===void 0&&(N=F):u=u?[u,m].join(":"):m}if(!u)throw new Error("Format for `--goto` should be: `FILE:LINE(:COLUMN)`");return{path:u,line:f!==void 0?f:void 0,column:N!==void 0?N:f!==void 0?1:void 0}}e.parseLineAndColumnAware=E;const C="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";function o(l,h,u=8){let f="";for(let m=0;m<u;m++)f+=C.charAt(Math.floor(Math.random()*C.length));let N;return h?N=`${h}-${f}`:N=f,l?(0,A.join)(l,N):N}e.randomPath=o}),define(te[8],ne([0,1,3,9]),function(J,e,A,q){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.FileAccess=e.RemoteAuthorities=e.connectionTokenQueryName=e.connectionTokenCookieName=e.Schemas=void 0;var M;(function(D){D.inMemory="inmemory",D.vscode="vscode",D.internal="private",D.walkThrough="walkThrough",D.walkThroughSnippet="walkThroughSnippet",D.http="http",D.https="https",D.file="file",D.mailto="mailto",D.untitled="untitled",D.data="data",D.command="command",D.vscodeRemote="vscode-remote",D.vscodeRemoteResource="vscode-remote-resource",D.userData="vscode-userdata",D.vscodeCustomEditor="vscode-custom-editor",D.vscodeNotebook="vscode-notebook",D.vscodeNotebookCell="vscode-notebook-cell",D.vscodeNotebookCellMetadata="vscode-notebook-cell-metadata",D.vscodeNotebookCellOutput="vscode-notebook-cell-output",D.vscodeInteractive="vscode-interactive",D.vscodeInteractiveInput="vscode-interactive-input",D.vscodeSettings="vscode-settings",D.vscodeWorkspaceTrust="vscode-workspace-trust",D.vscodeTerminal="vscode-terminal",D.webviewPanel="webview-panel",D.vscodeWebview="vscode-webview",D.extension="extension",D.vscodeFileResource="vscode-file",D.tmp="tmp",D.vsls="vsls"})(M=e.Schemas||(e.Schemas={})),e.connectionTokenCookieName="vscode-tkn",e.connectionTokenQueryName="tkn";class I{constructor(){this._hosts=Object.create(null),this._ports=Object.create(null),this._connectionTokens=Object.create(null),this._preferredWebSchema="http",this._delegate=null}setPreferredWebSchema(B){this._preferredWebSchema=B}setDelegate(B){this._delegate=B}set(B,L,S){this._hosts[B]=L,this._ports[B]=S}setConnectionToken(B,L){this._connectionTokens[B]=L}getPreferredWebSchema(){return this._preferredWebSchema}rewrite(B){if(this._delegate)return this._delegate(B);const L=B.authority;let S=this._hosts[L];S&&S.indexOf(":")!==-1&&(S=`[${S}]`);const P=this._ports[L],b=this._connectionTokens[L];let T=`path=${encodeURIComponent(B.path)}`;return typeof b=="string"&&(T+=`&${e.connectionTokenQueryName}=${encodeURIComponent(b)}`),q.URI.from({scheme:A.isWeb?this._preferredWebSchema:M.vscodeRemoteResource,authority:`${S}:${P}`,path:"/vscode-remote-resource",query:T})}}e.RemoteAuthorities=new I;class O{asBrowserUri(B,L){const S=this.toUri(B,L);return S.scheme===M.vscodeRemote?e.RemoteAuthorities.rewrite(S):S.scheme===M.file&&(A.isNative||typeof A.globals.importScripts=="function"&&A.globals.origin===`${M.vscodeFileResource}://${O.FALLBACK_AUTHORITY}`)?S.with({scheme:M.vscodeFileResource,authority:S.authority||O.FALLBACK_AUTHORITY,query:null,fragment:null}):S}asFileUri(B,L){const S=this.toUri(B,L);return S.scheme===M.vscodeFileResource?S.with({scheme:M.file,authority:S.authority!==O.FALLBACK_AUTHORITY?S.authority:null,query:null,fragment:null}):S}toUri(B,L){return q.URI.isUri(B)?B:q.URI.parse(L.toUrl(B))}}O.FALLBACK_AUTHORITY="vscode-app",e.FileAccess=new O}),define(te[16],ne([0,1,7,8,4,3,2,9]),function(J,e,A,q,M,I,O,D){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.toLocalResource=e.DataUri=e.distinctParents=e.addTrailingPathSeparator=e.removeTrailingPathSeparator=e.hasTrailingPathSeparator=e.isEqualAuthority=e.isAbsolutePath=e.resolvePath=e.relativePath=e.normalizePath=e.joinPath=e.dirname=e.extname=e.basename=e.basenameOrAuthority=e.getComparisonKey=e.isEqualOrParent=e.isEqual=e.extUriIgnorePathCase=e.extUriBiasedIgnorePathCase=e.extUri=e.ExtUri=e.originalFSPath=void 0;function B(T){return(0,D.uriToFsPath)(T,!0)}e.originalFSPath=B;class L{constructor(w){this._ignorePathCasing=w}compare(w,c,a=!1){return w===c?0:(0,O.compare)(this.getComparisonKey(w,a),this.getComparisonKey(c,a))}isEqual(w,c,a=!1){return w===c?!0:!w||!c?!1:this.getComparisonKey(w,a)===this.getComparisonKey(c,a)}getComparisonKey(w,c=!1){return w.with({path:this._ignorePathCasing(w)?w.path.toLowerCase():void 0,fragment:c?null:void 0}).toString()}ignorePathCasing(w){return this._ignorePathCasing(w)}isEqualOrParent(w,c,a=!1){if(w.scheme===c.scheme){if(w.scheme===q.Schemas.file)return A.isEqualOrParent(B(w),B(c),this._ignorePathCasing(w))&&w.query===c.query&&(a||w.fragment===c.fragment);if((0,e.isEqualAuthority)(w.authority,c.authority))return A.isEqualOrParent(w.path,c.path,this._ignorePathCasing(w),"/")&&w.query===c.query&&(a||w.fragment===c.fragment)}return!1}joinPath(w,...c){return D.URI.joinPath(w,...c)}basenameOrAuthority(w){return(0,e.basename)(w)||w.authority}basename(w){return M.posix.basename(w.path)}extname(w){return M.posix.extname(w.path)}dirname(w){if(w.path.length===0)return w;let c;return w.scheme===q.Schemas.file?c=D.URI.file(M.dirname(B(w))).path:(c=M.posix.dirname(w.path),w.authority&&c.length&&c.charCodeAt(0)!==47&&(console.error(`dirname("${w.toString})) resulted in a relative path`),c="/")),w.with({path:c})}normalizePath(w){if(!w.path.length)return w;let c;return w.scheme===q.Schemas.file?c=D.URI.file(M.normalize(B(w))).path:c=M.posix.normalize(w.path),w.with({path:c})}relativePath(w,c){if(w.scheme!==c.scheme||!(0,e.isEqualAuthority)(w.authority,c.authority))return;if(w.scheme===q.Schemas.file){const r=M.relative(B(w),B(c));return I.isWindows?A.toSlashes(r):r}let a=w.path||"/",t=c.path||"/";if(this._ignorePathCasing(w)){let r=0;for(const i=Math.min(a.length,t.length);r<i&&!(a.charCodeAt(r)!==t.charCodeAt(r)&&a.charAt(r).toLowerCase()!==t.charAt(r).toLowerCase());r++);a=t.substr(0,r)+a.substr(r)}return M.posix.relative(a,t)}resolvePath(w,c){if(w.scheme===q.Schemas.file){const a=D.URI.file(M.resolve(B(w),c));return w.with({authority:a.authority,path:a.path})}return c=A.toPosixPath(c),w.with({path:M.posix.resolve(w.path,c)})}isAbsolutePath(w){return!!w.path&&w.path[0]==="/"}isEqualAuthority(w,c){return w===c||w!==void 0&&c!==void 0&&(0,O.equalsIgnoreCase)(w,c)}hasTrailingPathSeparator(w,c=M.sep){if(w.scheme===q.Schemas.file){const a=B(w);return a.length>A.getRoot(a).length&&a[a.length-1]===c}else{const a=w.path;return a.length>1&&a.charCodeAt(a.length-1)===47&&!/^[a-zA-Z]:(\/$|\\$)/.test(w.fsPath)}}removeTrailingPathSeparator(w,c=M.sep){return(0,e.hasTrailingPathSeparator)(w,c)?w.with({path:w.path.substr(0,w.path.length-1)}):w}addTrailingPathSeparator(w,c=M.sep){let a=!1;if(w.scheme===q.Schemas.file){const t=B(w);a=t!==void 0&&t.length===A.getRoot(t).length&&t[t.length-1]===c}else{c="/";const t=w.path;a=t.length===1&&t.charCodeAt(t.length-1)===47}return!a&&!(0,e.hasTrailingPathSeparator)(w,c)?w.with({path:w.path+"/"}):w}}e.ExtUri=L,e.extUri=new L(()=>!1),e.extUriBiasedIgnorePathCase=new L(T=>T.scheme===q.Schemas.file?!I.isLinux:!0),e.extUriIgnorePathCase=new L(T=>!0),e.isEqual=e.extUri.isEqual.bind(e.extUri),e.isEqualOrParent=e.extUri.isEqualOrParent.bind(e.extUri),e.getComparisonKey=e.extUri.getComparisonKey.bind(e.extUri),e.basenameOrAuthority=e.extUri.basenameOrAuthority.bind(e.extUri),e.basename=e.extUri.basename.bind(e.extUri),e.extname=e.extUri.extname.bind(e.extUri),e.dirname=e.extUri.dirname.bind(e.extUri),e.joinPath=e.extUri.joinPath.bind(e.extUri),e.normalizePath=e.extUri.normalizePath.bind(e.extUri),e.relativePath=e.extUri.relativePath.bind(e.extUri),e.resolvePath=e.extUri.resolvePath.bind(e.extUri),e.isAbsolutePath=e.extUri.isAbsolutePath.bind(e.extUri),e.isEqualAuthority=e.extUri.isEqualAuthority.bind(e.extUri),e.hasTrailingPathSeparator=e.extUri.hasTrailingPathSeparator.bind(e.extUri),e.removeTrailingPathSeparator=e.extUri.removeTrailingPathSeparator.bind(e.extUri),e.addTrailingPathSeparator=e.extUri.addTrailingPathSeparator.bind(e.extUri);function S(T,w){const c=[];for(let a=0;a<T.length;a++){const t=w(T[a]);T.some((r,i)=>i===a?!1:(0,e.isEqualOrParent)(t,w(r)))||c.push(T[a])}return c}e.distinctParents=S;var P;(function(T){T.META_DATA_LABEL="label",T.META_DATA_DESCRIPTION="description",T.META_DATA_SIZE="size",T.META_DATA_MIME="mime";function w(c){const a=new Map;c.path.substring(c.path.indexOf(";")+1,c.path.lastIndexOf(";")).split(";").forEach(i=>{const[s,d]=i.split(":");s&&d&&a.set(s,d)});const r=c.path.substring(0,c.path.indexOf(";"));return r&&a.set(T.META_DATA_MIME,r),a}T.parseMetaData=w})(P=e.DataUri||(e.DataUri={}));function b(T,w,c){if(w){let a=T.path;return a&&a[0]!==M.posix.sep&&(a=M.posix.sep+a),T.with({scheme:c,authority:w,path:a})}return T.with({scheme:c})}e.toLocalResource=b}),define(te[17],ne([0,1,32,14,18,5,16,3]),function(J,e,A,q,M,I,O,D){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.createCancelableAsyncIterable=e.CancelableAsyncIterableObject=e.AsyncIterableObject=e.Promises=e.DeferredPromise=e.IntervalCounter=e.TaskSequentializer=e.retry=e.IdleValue=e.runWhenIdle=e.ThrottledWorker=e.RunOnceWorker=e.ProcessTimeRunOnceScheduler=e.RunOnceScheduler=e.IntervalTimer=e.TimeoutTimer=e.ResourceQueue=e.Queue=e.Limiter=e.firstParallel=e.first=e.sequence=e.disposableTimeout=e.timeout=e.AutoOpenBarrier=e.Barrier=e.ThrottledDelayer=e.Delayer=e.MicrotaskDelay=e.SequencerByKey=e.Sequencer=e.Throttler=e.asPromise=e.raceTimeout=e.raceCancellablePromises=e.raceCancellationError=e.raceCancellation=e.createCancelablePromise=e.isThenable=void 0;function B(W){return!!W&&typeof W.then=="function"}e.isThenable=B;function L(W){const g=new A.CancellationTokenSource,y=W(g.token),R=new Promise((U,G)=>{const ee=g.token.onCancellationRequested(()=>{ee.dispose(),g.dispose(),G(new q.CancellationError)});Promise.resolve(y).then(ie=>{ee.dispose(),g.dispose(),U(ie)},ie=>{ee.dispose(),g.dispose(),G(ie)})});return new class{cancel(){g.cancel()}then(U,G){return R.then(U,G)}catch(U){return this.then(void 0,U)}finally(U){return R.finally(U)}}}e.createCancelablePromise=L;function S(W,g,y){return new Promise((R,U)=>{const G=g.onCancellationRequested(()=>{G.dispose(),R(y)});W.then(R,U).finally(()=>G.dispose())})}e.raceCancellation=S;function P(W,g){return new Promise((y,R)=>{const U=g.onCancellationRequested(()=>{U.dispose(),R(new q.CancellationError)});W.then(y,R).finally(()=>U.dispose())})}e.raceCancellationError=P;async function b(W){let g=-1;const y=W.map((U,G)=>U.then(ee=>(g=G,ee))),R=await Promise.race(y);return W.forEach((U,G)=>{G!==g&&U.cancel()}),R}e.raceCancellablePromises=b;function T(W,g,y){let R;const U=setTimeout(()=>{R?.(void 0),y?.()},g);return Promise.race([W.finally(()=>clearTimeout(U)),new Promise(G=>R=G)])}e.raceTimeout=T;function w(W){return new Promise((g,y)=>{const R=W();B(R)?R.then(g,y):g(R)})}e.asPromise=w;class c{constructor(){this.activePromise=null,this.queuedPromise=null,this.queuedPromiseFactory=null}queue(g){if(this.activePromise){if(this.queuedPromiseFactory=g,!this.queuedPromise){const y=()=>{this.queuedPromise=null;const R=this.queue(this.queuedPromiseFactory);return this.queuedPromiseFactory=null,R};this.queuedPromise=new Promise(R=>{this.activePromise.then(y,y).then(R)})}return new Promise((y,R)=>{this.queuedPromise.then(y,R)})}return this.activePromise=g(),new Promise((y,R)=>{this.activePromise.then(U=>{this.activePromise=null,y(U)},U=>{this.activePromise=null,R(U)})})}}e.Throttler=c;class a{constructor(){this.current=Promise.resolve(null)}queue(g){return this.current=this.current.then(()=>g(),()=>g())}}e.Sequencer=a;class t{constructor(){this.promiseMap=new Map}queue(g,y){const U=(this.promiseMap.get(g)??Promise.resolve()).catch(()=>{}).then(y).finally(()=>{this.promiseMap.get(g)===U&&this.promiseMap.delete(g)});return this.promiseMap.set(g,U),U}}e.SequencerByKey=t;const r=(W,g)=>{let y=!0;const R=setTimeout(()=>{y=!1,g()},W);return{isTriggered:()=>y,dispose:()=>{clearTimeout(R),y=!1}}},i=W=>{let g=!0;return queueMicrotask(()=>{g&&(g=!1,W())}),{isTriggered:()=>g,dispose:()=>{g=!1}}};e.MicrotaskDelay=Symbol("MicrotaskDelay");class s{constructor(g){this.defaultDelay=g,this.deferred=null,this.completionPromise=null,this.doResolve=null,this.doReject=null,this.task=null}trigger(g,y=this.defaultDelay){this.task=g,this.cancelTimeout(),this.completionPromise||(this.completionPromise=new Promise((U,G)=>{this.doResolve=U,this.doReject=G}).then(()=>{if(this.completionPromise=null,this.doResolve=null,this.task){const U=this.task;return this.task=null,U()}}));const R=()=>{this.deferred=null,this.doResolve?.(null)};return this.deferred=y===e.MicrotaskDelay?i(R):r(y,R),this.completionPromise}isTriggered(){return!!this.deferred?.isTriggered()}cancel(){this.cancelTimeout(),this.completionPromise&&(this.doReject&&this.doReject(new q.CancellationError),this.completionPromise=null)}cancelTimeout(){this.deferred?.dispose(),this.deferred=null}dispose(){this.cancel()}}e.Delayer=s;class d{constructor(g){this.delayer=new s(g),this.throttler=new c}trigger(g,y){return this.delayer.trigger(()=>this.throttler.queue(g),y)}isTriggered(){return this.delayer.isTriggered()}cancel(){this.delayer.cancel()}dispose(){this.delayer.dispose()}}e.ThrottledDelayer=d;class p{constructor(){this._isOpen=!1,this._promise=new Promise((g,y)=>{this._completePromise=g})}isOpen(){return this._isOpen}open(){this._isOpen=!0,this._completePromise(!0)}wait(){return this._promise}}e.Barrier=p;class E extends p{constructor(g){super();this._timeout=setTimeout(()=>this.open(),g)}open(){clearTimeout(this._timeout),super.open()}}e.AutoOpenBarrier=E;function C(W,g){return g?new Promise((y,R)=>{const U=setTimeout(()=>{G.dispose(),y()},W),G=g.onCancellationRequested(()=>{clearTimeout(U),G.dispose(),R(new q.CancellationError)})}):L(y=>C(W,y))}e.timeout=C;function o(W,g=0){const y=setTimeout(W,g);return(0,I.toDisposable)(()=>clearTimeout(y))}e.disposableTimeout=o;function l(W){const g=[];let y=0;const R=W.length;function U(){return y<R?W[y++]():null}function G(ee){ee!=null&&g.push(ee);const ie=U();return ie?ie.then(G):Promise.resolve(g)}return Promise.resolve(null).then(G)}e.sequence=l;function h(W,g=R=>!!R,y=null){let R=0;const U=W.length,G=()=>{if(R>=U)return Promise.resolve(y);const ee=W[R++];return Promise.resolve(ee()).then(re=>g(re)?Promise.resolve(re):G())};return G()}e.first=h;function u(W,g=R=>!!R,y=null){if(W.length===0)return Promise.resolve(y);let R=W.length;const U=()=>{R=-1;for(const G of W)G.cancel?.()};return new Promise((G,ee)=>{for(const ie of W)ie.then(re=>{--R>=0&&g(re)?(U(),G(re)):R===0&&G(y)}).catch(re=>{--R>=0&&(U(),ee(re))})})}e.firstParallel=u;class f{constructor(g){this._size=0,this.maxDegreeOfParalellism=g,this.outstandingPromises=[],this.runningPromises=0,this._onFinished=new M.Emitter}get onFinished(){return this._onFinished.event}get size(){return this._size}queue(g){return this._size++,new Promise((y,R)=>{this.outstandingPromises.push({factory:g,c:y,e:R}),this.consume()})}consume(){for(;this.outstandingPromises.length&&this.runningPromises<this.maxDegreeOfParalellism;){const g=this.outstandingPromises.shift();this.runningPromises++;const y=g.factory();y.then(g.c,g.e),y.then(()=>this.consumed(),()=>this.consumed())}}consumed(){this._size--,this.runningPromises--,this.outstandingPromises.length>0?this.consume():this._onFinished.fire()}dispose(){this._onFinished.dispose()}}e.Limiter=f;class N extends f{constructor(){super(1)}}e.Queue=N;class m{constructor(){this.queues=new Map,this.drainers=new Set}async whenDrained(){if(this.isDrained())return;const g=new z;return this.drainers.add(g),g.p}isDrained(){for(const[,g]of this.queues)if(g.size>0)return!1;return!0}queueFor(g,y=O.extUri){const R=y.getComparisonKey(g);let U=this.queues.get(R);return U||(U=new N,M.Event.once(U.onFinished)(()=>{U?.dispose(),this.queues.delete(R),this.onDidQueueFinish()}),this.queues.set(R,U)),U}onDidQueueFinish(){!this.isDrained()||this.releaseDrainers()}releaseDrainers(){for(const g of this.drainers)g.complete();this.drainers.clear()}dispose(){for(const[,g]of this.queues)g.dispose();this.queues.clear(),this.releaseDrainers()}}e.ResourceQueue=m;class F{constructor(g,y){this._token=-1,typeof g=="function"&&typeof y=="number"&&this.setIfNotSet(g,y)}dispose(){this.cancel()}cancel(){this._token!==-1&&(clearTimeout(this._token),this._token=-1)}cancelAndSet(g,y){this.cancel(),this._token=setTimeout(()=>{this._token=-1,g()},y)}setIfNotSet(g,y){this._token===-1&&(this._token=setTimeout(()=>{this._token=-1,g()},y))}}e.TimeoutTimer=F;class j{constructor(){this._token=-1}dispose(){this.cancel()}cancel(){this._token!==-1&&(clearInterval(this._token),this._token=-1)}cancelAndSet(g,y){this.cancel(),this._token=setInterval(()=>{g()},y)}}e.IntervalTimer=j;class k{constructor(g,y){this.timeoutToken=-1,this.runner=g,this.timeout=y,this.timeoutHandler=this.onTimeout.bind(this)}dispose(){this.cancel(),this.runner=null}cancel(){this.isScheduled()&&(clearTimeout(this.timeoutToken),this.timeoutToken=-1)}schedule(g=this.timeout){this.cancel(),this.timeoutToken=setTimeout(this.timeoutHandler,g)}get delay(){return this.timeout}set delay(g){this.timeout=g}isScheduled(){return this.timeoutToken!==-1}onTimeout(){this.timeoutToken=-1,this.runner&&this.doRun()}doRun(){this.runner&&this.runner()}}e.RunOnceScheduler=k;class n{constructor(g,y){y%1e3!=0&&console.warn(`ProcessTimeRunOnceScheduler resolution is 1s, ${y}ms is not a multiple of 1000ms.`),this.runner=g,this.timeout=y,this.counter=0,this.intervalToken=-1,this.intervalHandler=this.onInterval.bind(this)}dispose(){this.cancel(),this.runner=null}cancel(){this.isScheduled()&&(clearInterval(this.intervalToken),this.intervalToken=-1)}schedule(g=this.timeout){g%1e3!=0&&console.warn(`ProcessTimeRunOnceScheduler resolution is 1s, ${g}ms is not a multiple of 1000ms.`),this.cancel(),this.counter=Math.ceil(g/1e3),this.intervalToken=setInterval(this.intervalHandler,1e3)}isScheduled(){return this.intervalToken!==-1}onInterval(){this.counter--,!(this.counter>0)&&(clearInterval(this.intervalToken),this.intervalToken=-1,this.runner&&this.runner())}}e.ProcessTimeRunOnceScheduler=n;class _ extends k{constructor(g,y){super(g,y);this.units=[]}work(g){this.units.push(g),this.isScheduled()||this.schedule()}doRun(){const g=this.units;this.units=[],this.runner&&this.runner(g)}dispose(){this.units=[],super.dispose()}}e.RunOnceWorker=_;class v extends I.Disposable{constructor(g,y){super();this.options=g,this.handler=y,this.pendingWork=[],this.throttler=this._register(new I.MutableDisposable),this.disposed=!1}get pending(){return this.pendingWork.length}work(g){if(this.disposed)return!1;if(typeof this.options.maxBufferedWork=="number"){if(this.throttler.value){if(this.pending+g.length>this.options.maxBufferedWork)return!1}else if(this.pending+g.length-this.options.maxWorkChunkSize>this.options.maxBufferedWork)return!1}return this.pendingWork.push(...g),this.throttler.value||this.doWork(),!0}doWork(){this.handler(this.pendingWork.splice(0,this.options.maxWorkChunkSize)),this.pendingWork.length>0&&(this.throttler.value=new k(()=>{this.throttler.clear(),this.doWork()},this.options.throttleDelay),this.throttler.value.schedule())}dispose(){super.dispose(),this.disposed=!0}}e.ThrottledWorker=v,function(){typeof requestIdleCallback!="function"||typeof cancelIdleCallback!="function"?e.runWhenIdle=W=>{(0,D.setTimeout0)(()=>{if(g)return;const y=Date.now()+15;W(Object.freeze({didTimeout:!0,timeRemaining(){return Math.max(0,y-Date.now())}}))});let g=!1;return{dispose(){g||(g=!0)}}}:e.runWhenIdle=(W,g)=>{const y=requestIdleCallback(W,typeof g=="number"?{timeout:g}:void 0);let R=!1;return{dispose(){R||(R=!0,cancelIdleCallback(y))}}}}();class V{constructor(g){this._didRun=!1,this._executor=()=>{try{this._value=g()}catch(y){this._error=y}finally{this._didRun=!0}},this._handle=(0,e.runWhenIdle)(()=>this._executor())}dispose(){this._handle.dispose()}get value(){if(this._didRun||(this._handle.dispose(),this._executor()),this._error)throw this._error;return this._value}get isInitialized(){return this._didRun}}e.IdleValue=V;async function x(W,g,y){let R;for(let U=0;U<y;U++)try{return await W()}catch(G){R=G,await C(g)}throw R}e.retry=x;class Q{hasPending(g){return this._pending?typeof g=="number"?this._pending.taskId===g:!!this._pending:!1}get pending(){return this._pending?this._pending.promise:void 0}cancelPending(){this._pending?.cancel()}setPending(g,y,R){return this._pending={taskId:g,cancel:()=>R?.(),promise:y},y.then(()=>this.donePending(g),()=>this.donePending(g)),y}donePending(g){this._pending&&g===this._pending.taskId&&(this._pending=void 0,this.triggerNext())}triggerNext(){if(this._next){const g=this._next;this._next=void 0,g.run().then(g.promiseResolve,g.promiseReject)}}setNext(g){if(this._next)this._next.run=g;else{let y,R;const U=new Promise((G,ee)=>{y=G,R=ee});this._next={run:g,promise:U,promiseResolve:y,promiseReject:R}}return this._next.promise}}e.TaskSequentializer=Q;class Z{constructor(g,y=()=>Date.now()){this.interval=g,this.nowFn=y,this.lastIncrementTime=0,this.value=0}increment(){const g=this.nowFn();return g-this.lastIncrementTime>this.interval&&(this.lastIncrementTime=g,this.value=0),this.value++,this.value}}e.IntervalCounter=Z;class z{constructor(){this.rejected=!1,this.resolved=!1,this.p=new Promise((g,y)=>{this.completeCallback=g,this.errorCallback=y})}get isRejected(){return this.rejected}get isResolved(){return this.resolved}get isSettled(){return this.rejected||this.resolved}complete(g){return new Promise(y=>{this.completeCallback(g),this.resolved=!0,y()})}error(g){return new Promise(y=>{this.errorCallback(g),this.rejected=!0,y()})}cancel(){new Promise(g=>{this.errorCallback(new q.CancellationError),this.rejected=!0,g()})}}e.DeferredPromise=z;var K;(function(W){async function g(R){let U;const G=await Promise.all(R.map(ee=>ee.then(ie=>ie,ie=>{U||(U=ie)})));if(typeof U!="undefined")throw U;return G}W.settled=g;function y(R){return new Promise(async(U,G)=>{try{await R(U,G)}catch(ee){G(ee)}})}W.withAsyncBody=y})(K=e.Promises||(e.Promises={}));var $;(function(W){W[W.Initial=0]="Initial",W[W.DoneOK=1]="DoneOK",W[W.DoneError=2]="DoneError"})($||($={}));class H{constructor(g){this._state=0,this._results=[],this._error=null,this._onStateChanged=new M.Emitter,queueMicrotask(async()=>{const y={emitOne:R=>this.emitOne(R),emitMany:R=>this.emitMany(R),reject:R=>this.reject(R)};try{await Promise.resolve(g(y)),this.resolve()}catch(R){this.reject(R)}finally{y.emitOne=void 0,y.emitMany=void 0,y.reject=void 0}})}static fromArray(g){return new H(y=>{y.emitMany(g)})}static fromPromise(g){return new H(async y=>{y.emitMany(await g)})}static fromPromises(g){return new H(async y=>{await Promise.all(g.map(async R=>y.emitOne(await R)))})}static merge(g){return new H(async y=>{await Promise.all(g.map(async R=>{for await(const U of R)y.emitOne(U)}))})}[Symbol.asyncIterator](){let g=0;return{next:async()=>{do{if(this._state===2)throw this._error;if(g<this._results.length)return{done:!1,value:this._results[g++]};if(this._state===1)return{done:!0,value:void 0};await M.Event.toPromise(this._onStateChanged.event)}while(!0)}}}static map(g,y){return new H(async R=>{for await(const U of g)R.emitOne(y(U))})}map(g){return H.map(this,g)}static filter(g,y){return new H(async R=>{for await(const U of g)y(U)&&R.emitOne(U)})}filter(g){return H.filter(this,g)}static coalesce(g){return H.filter(g,y=>!!y)}coalesce(){return H.coalesce(this)}static async toPromise(g){const y=[];for await(const R of g)y.push(R);return y}toPromise(){return H.toPromise(this)}emitOne(g){this._state===0&&(this._results.push(g),this._onStateChanged.fire())}emitMany(g){this._state===0&&(this._results=this._results.concat(g),this._onStateChanged.fire())}resolve(){this._state===0&&(this._state=1,this._onStateChanged.fire())}reject(g){this._state===0&&(this._state=2,this._error=g,this._onStateChanged.fire())}}e.AsyncIterableObject=H,H.EMPTY=H.fromArray([]);class Y extends H{constructor(g,y){super(y);this._source=g}cancel(){this._source.cancel()}}e.CancelableAsyncIterableObject=Y;function X(W){const g=new A.CancellationTokenSource,y=W(g.token);return new Y(g,async R=>{const U=g.token.onCancellationRequested(()=>{U.dispose(),g.dispose(),R.reject(new q.CancellationError)});try{for await(const G of y){if(g.token.isCancellationRequested)return;R.emitOne(G)}U.dispose(),g.dispose()}catch(G){U.dispose(),g.dispose(),R.reject(G)}})}e.createCancelableAsyncIterable=X}),define(te[19],ne([0,1,17,7,15,4,3,2]),function(J,e,A,q,M,I,O,D){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getPathTerms=e.getBasenameTerms=e.isRelativePattern=e.hasSiblingFn=e.hasSiblingPromiseFn=e.parse=e.match=e.splitGlobAware=e.GLOB_SPLIT=e.GLOBSTAR=e.getEmptyExpression=void 0;function B(){return Object.create(null)}e.getEmptyExpression=B,e.GLOBSTAR="**",e.GLOB_SPLIT="/";const L="[/\\\\]",S="[^/\\\\]",P=/\//g;function b(z){switch(z){case 0:return"";case 1:return`${S}*?`;default:return`(?:${L}|${S}+${L}|${L}${S}+)*?`}}function T(z,K){if(!z)return[];const $=[];let H=!1,Y=!1,X="";for(const W of z){switch(W){case K:if(!H&&!Y){$.push(X),X="";continue}break;case"{":H=!0;break;case"}":H=!1;break;case"[":Y=!0;break;case"]":Y=!1;break}X+=W}return X&&$.push(X),$}e.splitGlobAware=T;function w(z){if(!z)return"";let K="";const $=T(z,e.GLOB_SPLIT);if($.every(H=>H===e.GLOBSTAR))K=".*";else{let H=!1;$.forEach((Y,X)=>{if(Y===e.GLOBSTAR){H||(K+=b(2),H=!0);return}let W=!1,g="",y=!1,R="";for(const U of Y){if(U!=="}"&&W){g+=U;continue}if(y&&(U!=="]"||!R)){let G;U==="-"?G=U:(U==="^"||U==="!")&&!R?G="^":U===e.GLOB_SPLIT?G="":G=(0,D.escapeRegExpCharacters)(U),R+=G;continue}switch(U){case"{":W=!0;continue;case"[":y=!0;continue;case"}":{K+=`(?:${T(g,",").map(ie=>w(ie)).join("|")})`,W=!1,g="";break}case"]":K+="["+R+"]",y=!1,R="";break;case"?":K+=S;continue;case"*":K+=b(1);continue;default:K+=(0,D.escapeRegExpCharacters)(U)}}X<$.length-1&&($[X+1]!==e.GLOBSTAR||X+2<$.length)&&(K+=L),H=!1})}return K}const c=/^\*\*\/\*\.[\w\.-]+$/,a=/^\*\*\/([\w\.-]+)\/?$/,t=/^{\*\*\/\*?[\w\.-]+\/?(,\*\*\/\*?[\w\.-]+\/?)*}$/,r=/^{\*\*\/\*?[\w\.-]+(\/(\*\*)?)?(,\*\*\/\*?[\w\.-]+(\/(\*\*)?)?)*}$/,i=/^\*\*((\/[\w\.-]+)+)\/?$/,s=/^([\w\.-]+(\/[\w\.-]+)*)\/?$/,d=new M.LRUCache(1e4),p=function(){return!1},E=function(){return null};function C(z,K){if(!z)return E;let $;typeof z!="string"?$=z.pattern:$=z,$=$.trim();const H=`${$}_${!!K.trimForExclusions}`;let Y=d.get(H);if(Y)return o(Y,z);let X;if(c.test($)){const W=$.substr(4);Y=function(g,y){return typeof g=="string"&&g.endsWith(W)?$:null}}else(X=a.exec(l($,K)))?Y=h(X[1],$):(K.trimForExclusions?r:t).test($)?Y=u($,K):(X=i.exec(l($,K)))?Y=f(X[1].substr(1),$,!0):(X=s.exec(l($,K)))?Y=f(X[1],$,!1):Y=N($);return d.set(H,Y),o(Y,z)}function o(z,K){return typeof K=="string"?z:function($,H){return(0,q.isEqualOrParent)($,K.base,!O.isLinux)?z($.substr(K.base.length+1),H):null}}function l(z,K){return K.trimForExclusions&&z.endsWith("/**")?z.substr(0,z.length-2):z}function h(z,K){const $=`/${z}`,H=`\\${z}`,Y=function(W,g){return typeof W!="string"?null:g?g===z?K:null:W===z||W.endsWith($)||W.endsWith(H)?K:null},X=[z];return Y.basenames=X,Y.patterns=[K],Y.allBasenames=X,Y}function u(z,K){const $=Z(z.slice(1,-1).split(",").map(g=>C(g,K)).filter(g=>g!==E),z),H=$.length;if(!H)return E;if(H===1)return $[0];const Y=function(g,y){for(let R=0,U=$.length;R<U;R++)if($[R](g,y))return z;return null},X=$.find(g=>!!g.allBasenames);X&&(Y.allBasenames=X.allBasenames);const W=$.reduce((g,y)=>y.allPaths?g.concat(y.allPaths):g,[]);return W.length&&(Y.allPaths=W),Y}function f(z,K,$){const H=I.sep===I.posix.sep,Y=H?z:z.replace(P,I.sep),X=I.sep+Y,W=I.posix.sep+z,g=$?function(y,R){return typeof y=="string"&&(y===Y||y.endsWith(X)||!H&&(y===z||y.endsWith(W)))?K:null}:function(y,R){return typeof y=="string"&&(y===Y||!H&&y===z)?K:null};return g.allPaths=[($?"*/":"./")+z],g}function N(z){try{const K=new RegExp(`^${w(z)}$`);return function($){return K.lastIndex=0,typeof $=="string"&&K.test($)?z:null}}catch{return E}}function m(z,K,$){return!z||typeof K!="string"?!1:F(z)(K,void 0,$)}e.match=m;function F(z,K={}){if(!z)return p;if(typeof z=="string"||_(z)){const $=C(z,K);if($===E)return p;const H=function(Y,X){return!!$(Y,X)};return $.allBasenames&&(H.allBasenames=$.allBasenames),$.allPaths&&(H.allPaths=$.allPaths),H}return x(z,K)}e.parse=F;function j(z){if(!z)return;let K;return $=>(K||(K=(z()||Promise.resolve([])).then(H=>H?n(H):{})),K.then(H=>!!H[$]))}e.hasSiblingPromiseFn=j;function k(z){if(!z)return;let K;return $=>{if(!K){const H=z();K=H?n(H):{}}return!!K[$]}}e.hasSiblingFn=k;function n(z){const K={};for(const $ of z)K[$]=!0;return K}function _(z){const K=z;return K?typeof K.base=="string"&&typeof K.pattern=="string":!1}e.isRelativePattern=_;function v(z){return z.allBasenames||[]}e.getBasenameTerms=v;function V(z){return z.allPaths||[]}e.getPathTerms=V;function x(z,K){const $=Z(Object.getOwnPropertyNames(z).map(g=>Q(g,z[g],K)).filter(g=>g!==E)),H=$.length;if(!H)return E;if(!$.some(g=>!!g.requiresSiblings)){if(H===1)return $[0];const g=function(U,G){for(let ee=0,ie=$.length;ee<ie;ee++){const re=$[ee](U,G);if(re)return re}return null},y=$.find(U=>!!U.allBasenames);y&&(g.allBasenames=y.allBasenames);const R=$.reduce((U,G)=>G.allPaths?U.concat(G.allPaths):U,[]);return R.length&&(g.allPaths=R),g}const Y=function(g,y,R){let U;for(let G=0,ee=$.length;G<ee;G++){const ie=$[G];ie.requiresSiblings&&R&&(y||(y=(0,I.basename)(g)),U||(U=y.substr(0,y.length-(0,I.extname)(g).length)));const re=ie(g,y,U,R);if(re)return re}return null},X=$.find(g=>!!g.allBasenames);X&&(Y.allBasenames=X.allBasenames);const W=$.reduce((g,y)=>y.allPaths?g.concat(y.allPaths):g,[]);return W.length&&(Y.allPaths=W),Y}function Q(z,K,$){if(K===!1)return E;const H=C(z,$);if(H===E)return E;if(typeof K=="boolean")return H;if(K){const Y=K.when;if(typeof Y=="string"){const X=(W,g,y,R)=>{if(!R||!H(W,g))return null;const U=Y.replace("$(basename)",y),G=R(U);return(0,A.isThenable)(G)?G.then(ee=>ee?z:null):G?z:null};return X.requiresSiblings=!0,X}}return H}function Z(z,K){const $=z.filter(g=>!!g.basenames);if($.length<2)return z;const H=$.reduce((g,y)=>{const R=y.basenames;return R?g.concat(R):g},[]);let Y;if(K){Y=[];for(let g=0,y=H.length;g<y;g++)Y.push(K)}else Y=$.reduce((g,y)=>{const R=y.patterns;return R?g.concat(R):g},[]);const X=function(g,y){if(typeof g!="string")return null;if(!y){let U;for(U=g.length;U>0;U--){const G=g.charCodeAt(U-1);if(G===47||G===92)break}y=g.substr(U)}const R=H.indexOf(y);return R!==-1?Y[R]:null};X.basenames=H,X.patterns=Y,X.allBasenames=H;const W=z.filter(g=>!g.basenames);return W.push(X),W}}),define(te[20],ne([0,1]),function(J,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.countEOL=e.StringEOL=void 0;var A;(function(M){M[M.Unknown=0]="Unknown",M[M.Invalid=3]="Invalid",M[M.LF=1]="LF",M[M.CRLF=2]="CRLF"})(A=e.StringEOL||(e.StringEOL={}));function q(M){let I=0,O=0,D=0,B=0;for(let L=0,S=M.length;L<S;L++){const P=M.charCodeAt(L);P===13?(I===0&&(O=L),I++,L+1<S&&M.charCodeAt(L+1)===10?(B|=2,L++):B|=3,D=L+1):P===10&&(B|=1,I===0&&(O=L),I++,D=L+1)}return I===0&&(O=M.length),[I,O,M.length-D,B]}e.countEOL=q}),define(te[21],ne([0,1,2,3,6]),function(J,e,A,q,M){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.decodeUTF16LE=e.createStringBuilder=e.hasTextDecoder=e.getPlatformTextDecoder=void 0;let I;function O(){return I||(I=new TextDecoder("UTF-16LE")),I}let D;function B(){return D||(D=new TextDecoder("UTF-16BE")),D}let L;function S(){return L||(L=q.isLittleEndian()?O():B()),L}e.getPlatformTextDecoder=S,e.hasTextDecoder=typeof TextDecoder!="undefined",e.hasTextDecoder?(e.createStringBuilder=c=>new T(c),e.decodeUTF16LE=P):(e.createStringBuilder=c=>new w,e.decodeUTF16LE=b);function P(c,a,t){const r=new Uint16Array(c.buffer,a,t);return t>0&&(r[0]===65279||r[0]===65534)?b(c,a,t):O().decode(r)}function b(c,a,t){const r=[];let i=0;for(let s=0;s<t;s++){const d=M.readUInt16LE(c,a);a+=2,r[i++]=String.fromCharCode(d)}return r.join("")}class T{constructor(a){this._capacity=a|0,this._buffer=new Uint16Array(this._capacity),this._completedStrings=null,this._bufferLength=0}reset(){this._completedStrings=null,this._bufferLength=0}build(){return this._completedStrings!==null?(this._flushBuffer(),this._completedStrings.join("")):this._buildBuffer()}_buildBuffer(){if(this._bufferLength===0)return"";const a=new Uint16Array(this._buffer.buffer,0,this._bufferLength);return S().decode(a)}_flushBuffer(){const a=this._buildBuffer();this._bufferLength=0,this._completedStrings===null?this._completedStrings=[a]:this._completedStrings[this._completedStrings.length]=a}write1(a){const t=this._capacity-this._bufferLength;t<=1&&(t===0||A.isHighSurrogate(a))&&this._flushBuffer(),this._buffer[this._bufferLength++]=a}appendASCII(a){this._bufferLength===this._capacity&&this._flushBuffer(),this._buffer[this._bufferLength++]=a}appendASCIIString(a){const t=a.length;if(this._bufferLength+t>=this._capacity){this._flushBuffer(),this._completedStrings[this._completedStrings.length]=a;return}for(let r=0;r<t;r++)this._buffer[this._bufferLength++]=a.charCodeAt(r)}}class w{constructor(){this._pieces=[],this._piecesLen=0}reset(){this._pieces=[],this._piecesLen=0}build(){return this._pieces.join("")}write1(a){this._pieces[this._piecesLen++]=String.fromCharCode(a)}appendASCII(a){this._pieces[this._piecesLen++]=String.fromCharCode(a)}appendASCIIString(a){this._pieces[this._piecesLen++]=a}}}),define(te[22],ne([0,1,6,21]),function(J,e,A,q){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.compressConsecutiveTextChanges=e.TextChange=void 0;function M(B){return B.replace(/\n/g,"\\n").replace(/\r/g,"\\r")}class I{constructor(L,S,P,b){this.oldPosition=L,this.oldText=S,this.newPosition=P,this.newText=b}get oldLength(){return this.oldText.length}get oldEnd(){return this.oldPosition+this.oldText.length}get newLength(){return this.newText.length}get newEnd(){return this.newPosition+this.newText.length}toString(){return this.oldText.length===0?`(insert@${this.oldPosition} "${M(this.newText)}")`:this.newText.length===0?`(delete@${this.oldPosition} "${M(this.oldText)}")`:`(replace@${this.oldPosition} "${M(this.oldText)}" with "${M(this.newText)}")`}static _writeStringSize(L){return 4+2*L.length}static _writeString(L,S,P){const b=S.length;A.writeUInt32BE(L,b,P),P+=4;for(let T=0;T<b;T++)A.writeUInt16LE(L,S.charCodeAt(T),P),P+=2;return P}static _readString(L,S){const P=A.readUInt32BE(L,S);return S+=4,(0,q.decodeUTF16LE)(L,S,P)}writeSize(){return 4+4+I._writeStringSize(this.oldText)+I._writeStringSize(this.newText)}write(L,S){return A.writeUInt32BE(L,this.oldPosition,S),S+=4,A.writeUInt32BE(L,this.newPosition,S),S+=4,S=I._writeString(L,this.oldText,S),S=I._writeString(L,this.newText,S),S}static read(L,S,P){const b=A.readUInt32BE(L,S);S+=4;const T=A.readUInt32BE(L,S);S+=4;const w=I._readString(L,S);S+=I._writeStringSize(w);const c=I._readString(L,S);return S+=I._writeStringSize(c),P.push(new I(b,w,T,c)),S}}e.TextChange=I;function O(B,L){return B===null||B.length===0?L:new D(B,L).compress()}e.compressConsecutiveTextChanges=O;class D{constructor(L,S){this._prevEdits=L,this._currEdits=S,this._result=[],this._resultLen=0,this._prevLen=this._prevEdits.length,this._prevDeltaOffset=0,this._currLen=this._currEdits.length,this._currDeltaOffset=0}compress(){let L=0,S=0,P=this._getPrev(L),b=this._getCurr(S);for(;L<this._prevLen||S<this._currLen;){if(P===null){this._acceptCurr(b),b=this._getCurr(++S);continue}if(b===null){this._acceptPrev(P),P=this._getPrev(++L);continue}if(b.oldEnd<=P.newPosition){this._acceptCurr(b),b=this._getCurr(++S);continue}if(P.newEnd<=b.oldPosition){this._acceptPrev(P),P=this._getPrev(++L);continue}if(b.oldPosition<P.newPosition){const[t,r]=D._splitCurr(b,P.newPosition-b.oldPosition);this._acceptCurr(t),b=r;continue}if(P.newPosition<b.oldPosition){const[t,r]=D._splitPrev(P,b.oldPosition-P.newPosition);this._acceptPrev(t),P=r;continue}let c,a;if(b.oldEnd===P.newEnd)c=P,a=b,P=this._getPrev(++L),b=this._getCurr(++S);else if(b.oldEnd<P.newEnd){const[t,r]=D._splitPrev(P,b.oldLength);c=t,a=b,P=r,b=this._getCurr(++S)}else{const[t,r]=D._splitCurr(b,P.newLength);c=P,a=t,P=this._getPrev(++L),b=r}this._result[this._resultLen++]=new I(c.oldPosition,c.oldText,a.newPosition,a.newText),this._prevDeltaOffset+=c.newLength-c.oldLength,this._currDeltaOffset+=a.newLength-a.oldLength}const T=D._merge(this._result);return D._removeNoOps(T)}_acceptCurr(L){this._result[this._resultLen++]=D._rebaseCurr(this._prevDeltaOffset,L),this._currDeltaOffset+=L.newLength-L.oldLength}_getCurr(L){return L<this._currLen?this._currEdits[L]:null}_acceptPrev(L){this._result[this._resultLen++]=D._rebasePrev(this._currDeltaOffset,L),this._prevDeltaOffset+=L.newLength-L.oldLength}_getPrev(L){return L<this._prevLen?this._prevEdits[L]:null}static _rebaseCurr(L,S){return new I(S.oldPosition-L,S.oldText,S.newPosition,S.newText)}static _rebasePrev(L,S){return new I(S.oldPosition,S.oldText,S.newPosition+L,S.newText)}static _splitPrev(L,S){const P=L.newText.substr(0,S),b=L.newText.substr(S);return[new I(L.oldPosition,L.oldText,L.newPosition,P),new I(L.oldEnd,"",L.newPosition+S,b)]}static _splitCurr(L,S){const P=L.oldText.substr(0,S),b=L.oldText.substr(S);return[new I(L.oldPosition,P,L.newPosition,L.newText),new I(L.oldPosition+S,b,L.newEnd,"")]}static _merge(L){if(L.length===0)return L;const S=[];let P=0,b=L[0];for(let T=1;T<L.length;T++){const w=L[T];b.oldEnd===w.oldPosition?b=new I(b.oldPosition,b.oldText+w.oldText,b.newPosition,b.newText+w.newText):(S[P++]=b,b=w)}return S[P++]=b,S}static _removeNoOps(L){if(L.length===0)return L;const S=[];let P=0;for(let b=0;b<L.length;b++){const T=L[b];T.oldText!==T.newText&&(S[P++]=T)}return S}}}),define(te[23],ne([0,1]),function(J,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.recomputeTreeMetadata=e.updateTreeMetadata=e.fixInsert=e.rbDelete=e.rightRotate=e.leftRotate=e.resetSentinel=e.calculateLF=e.calculateSize=e.righttest=e.leftest=e.SENTINEL=e.NodeColor=e.TreeNode=void 0;class A{constructor(a,t){this.piece=a,this.color=t,this.size_left=0,this.lf_left=0,this.parent=this,this.left=this,this.right=this}next(){if(this.right!==e.SENTINEL)return M(this.right);let a=this;for(;a.parent!==e.SENTINEL&&a.parent.left!==a;)a=a.parent;return a.parent===e.SENTINEL?e.SENTINEL:a.parent}prev(){if(this.left!==e.SENTINEL)return I(this.left);let a=this;for(;a.parent!==e.SENTINEL&&a.parent.right!==a;)a=a.parent;return a.parent===e.SENTINEL?e.SENTINEL:a.parent}detach(){this.parent=null,this.left=null,this.right=null}}e.TreeNode=A;var q;(function(c){c[c.Black=0]="Black",c[c.Red=1]="Red"})(q=e.NodeColor||(e.NodeColor={})),e.SENTINEL=new A(null,0),e.SENTINEL.parent=e.SENTINEL,e.SENTINEL.left=e.SENTINEL,e.SENTINEL.right=e.SENTINEL,e.SENTINEL.color=0;function M(c){for(;c.left!==e.SENTINEL;)c=c.left;return c}e.leftest=M;function I(c){for(;c.right!==e.SENTINEL;)c=c.right;return c}e.righttest=I;function O(c){return c===e.SENTINEL?0:c.size_left+c.piece.length+O(c.right)}e.calculateSize=O;function D(c){return c===e.SENTINEL?0:c.lf_left+c.piece.lineFeedCnt+D(c.right)}e.calculateLF=D;function B(){e.SENTINEL.parent=e.SENTINEL}e.resetSentinel=B;function L(c,a){const t=a.right;t.size_left+=a.size_left+(a.piece?a.piece.length:0),t.lf_left+=a.lf_left+(a.piece?a.piece.lineFeedCnt:0),a.right=t.left,t.left!==e.SENTINEL&&(t.left.parent=a),t.parent=a.parent,a.parent===e.SENTINEL?c.root=t:a.parent.left===a?a.parent.left=t:a.parent.right=t,t.left=a,a.parent=t}e.leftRotate=L;function S(c,a){const t=a.left;a.left=t.right,t.right!==e.SENTINEL&&(t.right.parent=a),t.parent=a.parent,a.size_left-=t.size_left+(t.piece?t.piece.length:0),a.lf_left-=t.lf_left+(t.piece?t.piece.lineFeedCnt:0),a.parent===e.SENTINEL?c.root=t:a===a.parent.right?a.parent.right=t:a.parent.left=t,t.right=a,a.parent=t}e.rightRotate=S;function P(c,a){let t,r;if(a.left===e.SENTINEL?(r=a,t=r.right):a.right===e.SENTINEL?(r=a,t=r.left):(r=M(a.right),t=r.right),r===c.root){c.root=t,t.color=0,a.detach(),B(),c.root.parent=e.SENTINEL;return}const i=r.color===1;if(r===r.parent.left?r.parent.left=t:r.parent.right=t,r===a?(t.parent=r.parent,w(c,t)):(r.parent===a?t.parent=r:t.parent=r.parent,w(c,t),r.left=a.left,r.right=a.right,r.parent=a.parent,r.color=a.color,a===c.root?c.root=r:a===a.parent.left?a.parent.left=r:a.parent.right=r,r.left!==e.SENTINEL&&(r.left.parent=r),r.right!==e.SENTINEL&&(r.right.parent=r),r.size_left=a.size_left,r.lf_left=a.lf_left,w(c,r)),a.detach(),t.parent.left===t){const d=O(t),p=D(t);if(d!==t.parent.size_left||p!==t.parent.lf_left){const E=d-t.parent.size_left,C=p-t.parent.lf_left;t.parent.size_left=d,t.parent.lf_left=p,T(c,t.parent,E,C)}}if(w(c,t.parent),i){B();return}let s;for(;t!==c.root&&t.color===0;)t===t.parent.left?(s=t.parent.right,s.color===1&&(s.color=0,t.parent.color=1,L(c,t.parent),s=t.parent.right),s.left.color===0&&s.right.color===0?(s.color=1,t=t.parent):(s.right.color===0&&(s.left.color=0,s.color=1,S(c,s),s=t.parent.right),s.color=t.parent.color,t.parent.color=0,s.right.color=0,L(c,t.parent),t=c.root)):(s=t.parent.left,s.color===1&&(s.color=0,t.parent.color=1,S(c,t.parent),s=t.parent.left),s.left.color===0&&s.right.color===0?(s.color=1,t=t.parent):(s.left.color===0&&(s.right.color=0,s.color=1,L(c,s),s=t.parent.left),s.color=t.parent.color,t.parent.color=0,s.left.color=0,S(c,t.parent),t=c.root));t.color=0,B()}e.rbDelete=P;function b(c,a){for(w(c,a);a!==c.root&&a.parent.color===1;)if(a.parent===a.parent.parent.left){const t=a.parent.parent.right;t.color===1?(a.parent.color=0,t.color=0,a.parent.parent.color=1,a=a.parent.parent):(a===a.parent.right&&(a=a.parent,L(c,a)),a.parent.color=0,a.parent.parent.color=1,S(c,a.parent.parent))}else{const t=a.parent.parent.left;t.color===1?(a.parent.color=0,t.color=0,a.parent.parent.color=1,a=a.parent.parent):(a===a.parent.left&&(a=a.parent,S(c,a)),a.parent.color=0,a.parent.parent.color=1,L(c,a.parent.parent))}c.root.color=0}e.fixInsert=b;function T(c,a,t,r){for(;a!==c.root&&a!==e.SENTINEL;)a.parent.left===a&&(a.parent.size_left+=t,a.parent.lf_left+=r),a=a.parent}e.updateTreeMetadata=T;function w(c,a){let t=0,r=0;if(a!==c.root){for(;a!==c.root&&a===a.parent.right;)a=a.parent;if(a!==c.root)for(a=a.parent,t=O(a.left)-a.size_left,r=D(a.left)-a.lf_left,a.size_left+=t,a.lf_left+=r;a!==c.root&&(t!==0||r!==0);)a.parent.left===a&&(a.parent.size_left+=t,a.parent.lf_left+=r),a=a.parent}}e.recomputeTreeMetadata=w}),define(te[10],ne([0,1,33,11,24,23,34]),function(J,e,A,q,M,I,O){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.PieceTreeBase=e.StringBuffer=e.Piece=e.createLineStarts=e.createLineStartsFast=e.LineStarts=e.createUintArray=e.AverageBufferSize=void 0,e.AverageBufferSize=65535;function D(a){let t;return a[a.length-1]<65536?t=new Uint16Array(a.length):t=new Uint32Array(a.length),t.set(a,0),t}e.createUintArray=D;class B{constructor(t,r,i,s,d){this.lineStarts=t,this.cr=r,this.lf=i,this.crlf=s,this.isBasicASCII=d}}e.LineStarts=B;function L(a,t=!0){const r=[0];let i=1;for(let s=0,d=a.length;s<d;s++){const p=a.charCodeAt(s);p===13?s+1<d&&a.charCodeAt(s+1)===10?(r[i++]=s+2,s++):r[i++]=s+1:p===10&&(r[i++]=s+1)}return t?D(r):r}e.createLineStartsFast=L;function S(a,t){a.length=0,a[0]=0;let r=1,i=0,s=0,d=0,p=!0;for(let C=0,o=t.length;C<o;C++){const l=t.charCodeAt(C);l===13?C+1<o&&t.charCodeAt(C+1)===10?(d++,a[r++]=C+2,C++):(i++,a[r++]=C+1):l===10?(s++,a[r++]=C+1):p&&l!==9&&(l<32||l>126)&&(p=!1)}const E=new B(D(a),i,s,d,p);return a.length=0,E}e.createLineStarts=S;class P{constructor(t,r,i,s,d){this.bufferIndex=t,this.start=r,this.end=i,this.lineFeedCnt=s,this.length=d}}e.Piece=P;class b{constructor(t,r){this.buffer=t,this.lineStarts=r}}e.StringBuffer=b;class T{constructor(t,r){this._pieces=[],this._tree=t,this._BOM=r,this._index=0,t.root!==I.SENTINEL&&t.iterate(t.root,i=>(i!==I.SENTINEL&&this._pieces.push(i.piece),!0))}read(){return this._pieces.length===0?this._index===0?(this._index++,this._BOM):null:this._index>this._pieces.length-1?null:this._index===0?this._BOM+this._tree.getPieceContent(this._pieces[this._index++]):this._tree.getPieceContent(this._pieces[this._index++])}}class w{constructor(t){this._limit=t,this._cache=[]}get(t){for(let r=this._cache.length-1;r>=0;r--){const i=this._cache[r];if(i.nodeStartOffset<=t&&i.nodeStartOffset+i.node.piece.length>=t)return i}return null}get2(t){for(let r=this._cache.length-1;r>=0;r--){const i=this._cache[r];if(i.nodeStartLineNumber&&i.nodeStartLineNumber<t&&i.nodeStartLineNumber+i.node.piece.lineFeedCnt>=t)return i}return null}set(t){this._cache.length>=this._limit&&this._cache.shift(),this._cache.push(t)}validate(t){let r=!1;const i=this._cache;for(let s=0;s<i.length;s++){const d=i[s];if(d.node.parent===null||d.nodeStartOffset>=t){i[s]=null,r=!0;continue}}if(r){const s=[];for(const d of i)d!==null&&s.push(d);this._cache=s}}}class c{constructor(t,r,i){this.create(t,r,i)}create(t,r,i){this._buffers=[new b("",[0])],this._lastChangeBufferPos={line:0,column:0},this.root=I.SENTINEL,this._lineCnt=1,this._length=0,this._EOL=r,this._EOLLength=r.length,this._EOLNormalized=i;let s=null;for(let d=0,p=t.length;d<p;d++)if(t[d].buffer.length>0){t[d].lineStarts||(t[d].lineStarts=L(t[d].buffer));const E=new P(d+1,{line:0,column:0},{line:t[d].lineStarts.length-1,column:t[d].buffer.length-t[d].lineStarts[t[d].lineStarts.length-1]},t[d].lineStarts.length-1,t[d].buffer.length);this._buffers.push(t[d]),s=this.rbInsertRight(s,E)}this._searchCache=new w(1),this._lastVisitedLine={lineNumber:0,value:""},this.computeBufferMetadata()}normalizeEOL(t){const r=e.AverageBufferSize,i=r-Math.floor(r/3),s=i*2;let d="",p=0;const E=[];if(this.iterate(this.root,C=>{const o=this.getNodeContent(C),l=o.length;if(p<=i||p+l<s)return d+=o,p+=l,!0;const h=d.replace(/\r\n|\r|\n/g,t);return E.push(new b(h,L(h))),d=o,p=l,!0}),p>0){const C=d.replace(/\r\n|\r|\n/g,t);E.push(new b(C,L(C)))}this.create(E,t,!0)}getEOL(){return this._EOL}setEOL(t){this._EOL=t,this._EOLLength=this._EOL.length,this.normalizeEOL(t)}createSnapshot(t){return new T(this,t)}equal(t){if(this.getLength()!==t.getLength()||this.getLineCount()!==t.getLineCount())return!1;const r=0;return this.iterate(this.root,s=>{if(s===I.SENTINEL)return!0;const d=this.getNodeContent(s),p=d.length,E=t.nodeAt(r),C=t.nodeAt(r+p),o=t.getValueInRange2(E,C);return d===o})}getOffsetAt(t,r){let i=0,s=this.root;for(;s!==I.SENTINEL;)if(s.left!==I.SENTINEL&&s.lf_left+1>=t)s=s.left;else{if(s.lf_left+s.piece.lineFeedCnt+1>=t)return i+=s.size_left,i+=this.getAccumulatedValue(s,t-s.lf_left-2)+r-1;t-=s.lf_left+s.piece.lineFeedCnt,i+=s.size_left+s.piece.length,s=s.right}return i}getPositionAt(t){t=Math.floor(t),t=Math.max(0,t);let r=this.root,i=0;const s=t;for(;r!==I.SENTINEL;)if(r.size_left!==0&&r.size_left>=t)r=r.left;else if(r.size_left+r.piece.length>=t){const d=this.getIndexOf(r,t-r.size_left);if(i+=r.lf_left+d.index,d.index===0){const p=this.getOffsetAt(i+1,1),E=s-p;return new A.Position(i+1,E+1)}return new A.Position(i+1,d.remainder+1)}else if(t-=r.size_left+r.piece.length,i+=r.lf_left+r.piece.lineFeedCnt,r.right===I.SENTINEL){const d=this.getOffsetAt(i+1,1),p=s-t-d;return new A.Position(i+1,p+1)}else r=r.right;return new A.Position(1,1)}getValueInRange(t,r){if(t.startLineNumber===t.endLineNumber&&t.startColumn===t.endColumn)return"";const i=this.nodeAt2(t.startLineNumber,t.startColumn),s=this.nodeAt2(t.endLineNumber,t.endColumn),d=this.getValueInRange2(i,s);return r?r!==this._EOL||!this._EOLNormalized?d.replace(/\r\n|\r|\n/g,r):r===this.getEOL()&&this._EOLNormalized?d:d.replace(/\r\n|\r|\n/g,r):d}getValueInRange2(t,r){if(t.node===r.node){const E=t.node,C=this._buffers[E.piece.bufferIndex].buffer,o=this.offsetInBuffer(E.piece.bufferIndex,E.piece.start);return C.substring(o+t.remainder,o+r.remainder)}let i=t.node;const s=this._buffers[i.piece.bufferIndex].buffer,d=this.offsetInBuffer(i.piece.bufferIndex,i.piece.start);let p=s.substring(d+t.remainder,d+i.piece.length);for(i=i.next();i!==I.SENTINEL;){const E=this._buffers[i.piece.bufferIndex].buffer,C=this.offsetInBuffer(i.piece.bufferIndex,i.piece.start);if(i===r.node){p+=E.substring(C,C+r.remainder);break}else p+=E.substr(C,i.piece.length);i=i.next()}return p}getLinesContent(){const t=[];let r=0,i="",s=!1;return this.iterate(this.root,d=>{if(d===I.SENTINEL)return!0;const p=d.piece;let E=p.length;if(E===0)return!0;const C=this._buffers[p.bufferIndex].buffer,o=this._buffers[p.bufferIndex].lineStarts,l=p.start.line,h=p.end.line;let u=o[l]+p.start.column;if(s&&(C.charCodeAt(u)===10&&(u++,E--),t[r++]=i,i="",s=!1,E===0))return!0;if(l===h)return!this._EOLNormalized&&C.charCodeAt(u+E-1)===13?(s=!0,i+=C.substr(u,E-1)):i+=C.substr(u,E),!0;i+=this._EOLNormalized?C.substring(u,Math.max(u,o[l+1]-this._EOLLength)):C.substring(u,o[l+1]).replace(/(\r\n|\r|\n)$/,""),t[r++]=i;for(let f=l+1;f<h;f++)i=this._EOLNormalized?C.substring(o[f],o[f+1]-this._EOLLength):C.substring(o[f],o[f+1]).replace(/(\r\n|\r|\n)$/,""),t[r++]=i;return!this._EOLNormalized&&C.charCodeAt(o[h]+p.end.column-1)===13?(s=!0,p.end.column===0?r--:i=C.substr(o[h],p.end.column-1)):i=C.substr(o[h],p.end.column),!0}),s&&(t[r++]=i,i=""),t[r++]=i,t}getLength(){return this._length}getLineCount(){return this._lineCnt}getLineContent(t){return this._lastVisitedLine.lineNumber===t?this._lastVisitedLine.value:(this._lastVisitedLine.lineNumber=t,t===this._lineCnt?this._lastVisitedLine.value=this.getLineRawContent(t):this._EOLNormalized?this._lastVisitedLine.value=this.getLineRawContent(t,this._EOLLength):this._lastVisitedLine.value=this.getLineRawContent(t).replace(/(\r\n|\r|\n)$/,""),this._lastVisitedLine.value)}_getCharCode(t){if(t.remainder===t.node.piece.length){const r=t.node.next();if(!r)return 0;const i=this._buffers[r.piece.bufferIndex],s=this.offsetInBuffer(r.piece.bufferIndex,r.piece.start);return i.buffer.charCodeAt(s)}else{const r=this._buffers[t.node.piece.bufferIndex],s=this.offsetInBuffer(t.node.piece.bufferIndex,t.node.piece.start)+t.remainder;return r.buffer.charCodeAt(s)}}getLineCharCode(t,r){const i=this.nodeAt2(t,r+1);return this._getCharCode(i)}getLineLength(t){if(t===this.getLineCount()){const r=this.getOffsetAt(t,1);return this.getLength()-r}return this.getOffsetAt(t+1,1)-this.getOffsetAt(t,1)-this._EOLLength}getCharCode(t){const r=this.nodeAt(t);return this._getCharCode(r)}findMatchesInNode(t,r,i,s,d,p,E,C,o,l,h){const u=this._buffers[t.piece.bufferIndex],f=this.offsetInBuffer(t.piece.bufferIndex,t.piece.start),N=this.offsetInBuffer(t.piece.bufferIndex,d),m=this.offsetInBuffer(t.piece.bufferIndex,p);let F;const j={line:0,column:0};let k,n;r._wordSeparators?(k=u.buffer.substring(N,m),n=_=>_+N,r.reset(0)):(k=u.buffer,n=_=>_,r.reset(N));do if(F=r.next(k),F){if(n(F.index)>=m)return l;this.positionInBuffer(t,n(F.index)-f,j);const _=this.getLineFeedCnt(t.piece.bufferIndex,d,j),v=j.line===d.line?j.column-d.column+s:j.column+1,V=v+F[0].length;if(h[l++]=(0,O.createFindMatch)(new q.Range(i+_,v,i+_,V),F,C),n(F.index)+F[0].length>=m||l>=o)return l}while(F);return l}findMatchesLineByLine(t,r,i,s){const d=[];let p=0;const E=new O.Searcher(r.wordSeparators,r.regex);let C=this.nodeAt2(t.startLineNumber,t.startColumn);if(C===null)return[];const o=this.nodeAt2(t.endLineNumber,t.endColumn);if(o===null)return[];let l=this.positionInBuffer(C.node,C.remainder);const h=this.positionInBuffer(o.node,o.remainder);if(C.node===o.node)return this.findMatchesInNode(C.node,E,t.startLineNumber,t.startColumn,l,h,r,i,s,p,d),d;let u=t.startLineNumber,f=C.node;for(;f!==o.node;){const m=this.getLineFeedCnt(f.piece.bufferIndex,l,f.piece.end);if(m>=1){const j=this._buffers[f.piece.bufferIndex].lineStarts,k=this.offsetInBuffer(f.piece.bufferIndex,f.piece.start),n=j[l.line+m],_=u===t.startLineNumber?t.startColumn:1;if(p=this.findMatchesInNode(f,E,u,_,l,this.positionInBuffer(f,n-k),r,i,s,p,d),p>=s)return d;u+=m}const F=u===t.startLineNumber?t.startColumn-1:0;if(u===t.endLineNumber){const j=this.getLineContent(u).substring(F,t.endColumn-1);return p=this._findMatchesInLine(r,E,j,t.endLineNumber,F,p,d,i,s),d}if(p=this._findMatchesInLine(r,E,this.getLineContent(u).substr(F),u,F,p,d,i,s),p>=s)return d;u++,C=this.nodeAt2(u,1),f=C.node,l=this.positionInBuffer(C.node,C.remainder)}if(u===t.endLineNumber){const m=u===t.startLineNumber?t.startColumn-1:0,F=this.getLineContent(u).substring(m,t.endColumn-1);return p=this._findMatchesInLine(r,E,F,t.endLineNumber,m,p,d,i,s),d}const N=u===t.startLineNumber?t.startColumn:1;return p=this.findMatchesInNode(o.node,E,u,N,l,h,r,i,s,p,d),d}_findMatchesInLine(t,r,i,s,d,p,E,C,o){const l=t.wordSeparators;if(!C&&t.simpleSearch){const u=t.simpleSearch,f=u.length,N=i.length;let m=-f;for(;(m=i.indexOf(u,m+f))!==-1;)if((!l||(0,O.isValidMatch)(l,i,N,m,f))&&(E[p++]=new M.FindMatch(new q.Range(s,m+1+d,s,m+1+f+d),null),p>=o))return p;return p}let h;r.reset(0);do if(h=r.next(i),h&&(E[p++]=(0,O.createFindMatch)(new q.Range(s,h.index+1+d,s,h.index+1+h[0].length+d),h,C),p>=o))return p;while(h);return p}insert(t,r,i=!1){if(this._EOLNormalized=this._EOLNormalized&&i,this._lastVisitedLine.lineNumber=0,this._lastVisitedLine.value="",this.root!==I.SENTINEL){const{node:s,remainder:d,nodeStartOffset:p}=this.nodeAt(t),E=s.piece,C=E.bufferIndex,o=this.positionInBuffer(s,d);if(s.piece.bufferIndex===0&&E.end.line===this._lastChangeBufferPos.line&&E.end.column===this._lastChangeBufferPos.column&&p+E.length===t&&r.length<e.AverageBufferSize){this.appendToNode(s,r),this.computeBufferMetadata();return}if(p===t)this.insertContentToNodeLeft(r,s),this._searchCache.validate(t);else if(p+s.piece.length>t){const l=[];let h=new P(E.bufferIndex,o,E.end,this.getLineFeedCnt(E.bufferIndex,o,E.end),this.offsetInBuffer(C,E.end)-this.offsetInBuffer(C,o));if(this.shouldCheckCRLF()&&this.endWithCR(r)&&this.nodeCharCodeAt(s,d)===10){const m={line:h.start.line+1,column:0};h=new P(h.bufferIndex,m,h.end,this.getLineFeedCnt(h.bufferIndex,m,h.end),h.length-1),r+=`
`}if(this.shouldCheckCRLF()&&this.startWithLF(r))if(this.nodeCharCodeAt(s,d-1)===13){const m=this.positionInBuffer(s,d-1);this.deleteNodeTail(s,m),r="\r"+r,s.piece.length===0&&l.push(s)}else this.deleteNodeTail(s,o);else this.deleteNodeTail(s,o);const u=this.createNewPieces(r);h.length>0&&this.rbInsertRight(s,h);let f=s;for(let N=0;N<u.length;N++)f=this.rbInsertRight(f,u[N]);this.deleteNodes(l)}else this.insertContentToNodeRight(r,s)}else{const s=this.createNewPieces(r);let d=this.rbInsertLeft(null,s[0]);for(let p=1;p<s.length;p++)d=this.rbInsertRight(d,s[p])}this.computeBufferMetadata()}delete(t,r){if(this._lastVisitedLine.lineNumber=0,this._lastVisitedLine.value="",r<=0||this.root===I.SENTINEL)return;const i=this.nodeAt(t),s=this.nodeAt(t+r),d=i.node,p=s.node;if(d===p){const u=this.positionInBuffer(d,i.remainder),f=this.positionInBuffer(d,s.remainder);if(i.nodeStartOffset===t){if(r===d.piece.length){const N=d.next();(0,I.rbDelete)(this,d),this.validateCRLFWithPrevNode(N),this.computeBufferMetadata();return}this.deleteNodeHead(d,f),this._searchCache.validate(t),this.validateCRLFWithPrevNode(d),this.computeBufferMetadata();return}if(i.nodeStartOffset+d.piece.length===t+r){this.deleteNodeTail(d,u),this.validateCRLFWithNextNode(d),this.computeBufferMetadata();return}this.shrinkNode(d,u,f),this.computeBufferMetadata();return}const E=[],C=this.positionInBuffer(d,i.remainder);this.deleteNodeTail(d,C),this._searchCache.validate(t),d.piece.length===0&&E.push(d);const o=this.positionInBuffer(p,s.remainder);this.deleteNodeHead(p,o),p.piece.length===0&&E.push(p);const l=d.next();for(let u=l;u!==I.SENTINEL&&u!==p;u=u.next())E.push(u);const h=d.piece.length===0?d.prev():d;this.deleteNodes(E),this.validateCRLFWithNextNode(h),this.computeBufferMetadata()}insertContentToNodeLeft(t,r){const i=[];if(this.shouldCheckCRLF()&&this.endWithCR(t)&&this.startWithLF(r)){const p=r.piece,E={line:p.start.line+1,column:0},C=new P(p.bufferIndex,E,p.end,this.getLineFeedCnt(p.bufferIndex,E,p.end),p.length-1);r.piece=C,t+=`
`,(0,I.updateTreeMetadata)(this,r,-1,-1),r.piece.length===0&&i.push(r)}const s=this.createNewPieces(t);let d=this.rbInsertLeft(r,s[s.length-1]);for(let p=s.length-2;p>=0;p--)d=this.rbInsertLeft(d,s[p]);this.validateCRLFWithPrevNode(d),this.deleteNodes(i)}insertContentToNodeRight(t,r){this.adjustCarriageReturnFromNext(t,r)&&(t+=`
`);const i=this.createNewPieces(t),s=this.rbInsertRight(r,i[0]);let d=s;for(let p=1;p<i.length;p++)d=this.rbInsertRight(d,i[p]);this.validateCRLFWithPrevNode(s)}positionInBuffer(t,r,i){const s=t.piece,d=t.piece.bufferIndex,p=this._buffers[d].lineStarts,C=p[s.start.line]+s.start.column+r;let o=s.start.line,l=s.end.line,h=0,u=0,f=0;for(;o<=l&&(h=o+(l-o)/2|0,f=p[h],h!==l);)if(u=p[h+1],C<f)l=h-1;else if(C>=u)o=h+1;else break;return i?(i.line=h,i.column=C-f,null):{line:h,column:C-f}}getLineFeedCnt(t,r,i){if(i.column===0)return i.line-r.line;const s=this._buffers[t].lineStarts;if(i.line===s.length-1)return i.line-r.line;const d=s[i.line+1],p=s[i.line]+i.column;if(d>p+1)return i.line-r.line;const E=p-1;return this._buffers[t].buffer.charCodeAt(E)===13?i.line-r.line+1:i.line-r.line}offsetInBuffer(t,r){return this._buffers[t].lineStarts[r.line]+r.column}deleteNodes(t){for(let r=0;r<t.length;r++)(0,I.rbDelete)(this,t[r])}createNewPieces(t){if(t.length>e.AverageBufferSize){const l=[];for(;t.length>e.AverageBufferSize;){const u=t.charCodeAt(e.AverageBufferSize-1);let f;u===13||u>=55296&&u<=56319?(f=t.substring(0,e.AverageBufferSize-1),t=t.substring(e.AverageBufferSize-1)):(f=t.substring(0,e.AverageBufferSize),t=t.substring(e.AverageBufferSize));const N=L(f);l.push(new P(this._buffers.length,{line:0,column:0},{line:N.length-1,column:f.length-N[N.length-1]},N.length-1,f.length)),this._buffers.push(new b(f,N))}const h=L(t);return l.push(new P(this._buffers.length,{line:0,column:0},{line:h.length-1,column:t.length-h[h.length-1]},h.length-1,t.length)),this._buffers.push(new b(t,h)),l}let r=this._buffers[0].buffer.length;const i=L(t,!1);let s=this._lastChangeBufferPos;if(this._buffers[0].lineStarts[this._buffers[0].lineStarts.length-1]===r&&r!==0&&this.startWithLF(t)&&this.endWithCR(this._buffers[0].buffer)){this._lastChangeBufferPos={line:this._lastChangeBufferPos.line,column:this._lastChangeBufferPos.column+1},s=this._lastChangeBufferPos;for(let l=0;l<i.length;l++)i[l]+=r+1;this._buffers[0].lineStarts=this._buffers[0].lineStarts.concat(i.slice(1)),this._buffers[0].buffer+="_"+t,r+=1}else{if(r!==0)for(let l=0;l<i.length;l++)i[l]+=r;this._buffers[0].lineStarts=this._buffers[0].lineStarts.concat(i.slice(1)),this._buffers[0].buffer+=t}const d=this._buffers[0].buffer.length,p=this._buffers[0].lineStarts.length-1,E=d-this._buffers[0].lineStarts[p],C={line:p,column:E},o=new P(0,s,C,this.getLineFeedCnt(0,s,C),d-r);return this._lastChangeBufferPos=C,[o]}getLinesRawContent(){return this.getContentOfSubTree(this.root)}getLineRawContent(t,r=0){let i=this.root,s="";const d=this._searchCache.get2(t);if(d){i=d.node;const p=this.getAccumulatedValue(i,t-d.nodeStartLineNumber-1),E=this._buffers[i.piece.bufferIndex].buffer,C=this.offsetInBuffer(i.piece.bufferIndex,i.piece.start);if(d.nodeStartLineNumber+i.piece.lineFeedCnt===t)s=E.substring(C+p,C+i.piece.length);else{const o=this.getAccumulatedValue(i,t-d.nodeStartLineNumber);return E.substring(C+p,C+o-r)}}else{let p=0;const E=t;for(;i!==I.SENTINEL;)if(i.left!==I.SENTINEL&&i.lf_left>=t-1)i=i.left;else if(i.lf_left+i.piece.lineFeedCnt>t-1){const C=this.getAccumulatedValue(i,t-i.lf_left-2),o=this.getAccumulatedValue(i,t-i.lf_left-1),l=this._buffers[i.piece.bufferIndex].buffer,h=this.offsetInBuffer(i.piece.bufferIndex,i.piece.start);return p+=i.size_left,this._searchCache.set({node:i,nodeStartOffset:p,nodeStartLineNumber:E-(t-1-i.lf_left)}),l.substring(h+C,h+o-r)}else if(i.lf_left+i.piece.lineFeedCnt===t-1){const C=this.getAccumulatedValue(i,t-i.lf_left-2),o=this._buffers[i.piece.bufferIndex].buffer,l=this.offsetInBuffer(i.piece.bufferIndex,i.piece.start);s=o.substring(l+C,l+i.piece.length);break}else t-=i.lf_left+i.piece.lineFeedCnt,p+=i.size_left+i.piece.length,i=i.right}for(i=i.next();i!==I.SENTINEL;){const p=this._buffers[i.piece.bufferIndex].buffer;if(i.piece.lineFeedCnt>0){const E=this.getAccumulatedValue(i,0),C=this.offsetInBuffer(i.piece.bufferIndex,i.piece.start);return s+=p.substring(C,C+E-r),s}else{const E=this.offsetInBuffer(i.piece.bufferIndex,i.piece.start);s+=p.substr(E,i.piece.length)}i=i.next()}return s}computeBufferMetadata(){let t=this.root,r=1,i=0;for(;t!==I.SENTINEL;)r+=t.lf_left+t.piece.lineFeedCnt,i+=t.size_left+t.piece.length,t=t.right;this._lineCnt=r,this._length=i,this._searchCache.validate(this._length)}getIndexOf(t,r){const i=t.piece,s=this.positionInBuffer(t,r),d=s.line-i.start.line;if(this.offsetInBuffer(i.bufferIndex,i.end)-this.offsetInBuffer(i.bufferIndex,i.start)===r){const p=this.getLineFeedCnt(t.piece.bufferIndex,i.start,s);if(p!==d)return{index:p,remainder:0}}return{index:d,remainder:s.column}}getAccumulatedValue(t,r){if(r<0)return 0;const i=t.piece,s=this._buffers[i.bufferIndex].lineStarts,d=i.start.line+r+1;return d>i.end.line?s[i.end.line]+i.end.column-s[i.start.line]-i.start.column:s[d]-s[i.start.line]-i.start.column}deleteNodeTail(t,r){const i=t.piece,s=i.lineFeedCnt,d=this.offsetInBuffer(i.bufferIndex,i.end),p=r,E=this.offsetInBuffer(i.bufferIndex,p),C=this.getLineFeedCnt(i.bufferIndex,i.start,p),o=C-s,l=E-d,h=i.length+l;t.piece=new P(i.bufferIndex,i.start,p,C,h),(0,I.updateTreeMetadata)(this,t,l,o)}deleteNodeHead(t,r){const i=t.piece,s=i.lineFeedCnt,d=this.offsetInBuffer(i.bufferIndex,i.start),p=r,E=this.getLineFeedCnt(i.bufferIndex,p,i.end),C=this.offsetInBuffer(i.bufferIndex,p),o=E-s,l=d-C,h=i.length+l;t.piece=new P(i.bufferIndex,p,i.end,E,h),(0,I.updateTreeMetadata)(this,t,l,o)}shrinkNode(t,r,i){const s=t.piece,d=s.start,p=s.end,E=s.length,C=s.lineFeedCnt,o=r,l=this.getLineFeedCnt(s.bufferIndex,s.start,o),h=this.offsetInBuffer(s.bufferIndex,r)-this.offsetInBuffer(s.bufferIndex,d);t.piece=new P(s.bufferIndex,s.start,o,l,h),(0,I.updateTreeMetadata)(this,t,h-E,l-C);const u=new P(s.bufferIndex,i,p,this.getLineFeedCnt(s.bufferIndex,i,p),this.offsetInBuffer(s.bufferIndex,p)-this.offsetInBuffer(s.bufferIndex,i)),f=this.rbInsertRight(t,u);this.validateCRLFWithPrevNode(f)}appendToNode(t,r){this.adjustCarriageReturnFromNext(r,t)&&(r+=`
`);const i=this.shouldCheckCRLF()&&this.startWithLF(r)&&this.endWithCR(t),s=this._buffers[0].buffer.length;this._buffers[0].buffer+=r;const d=L(r,!1);for(let f=0;f<d.length;f++)d[f]+=s;if(i){const f=this._buffers[0].lineStarts[this._buffers[0].lineStarts.length-2];this._buffers[0].lineStarts.pop(),this._lastChangeBufferPos={line:this._lastChangeBufferPos.line-1,column:s-f}}this._buffers[0].lineStarts=this._buffers[0].lineStarts.concat(d.slice(1));const p=this._buffers[0].lineStarts.length-1,E=this._buffers[0].buffer.length-this._buffers[0].lineStarts[p],C={line:p,column:E},o=t.piece.length+r.length,l=t.piece.lineFeedCnt,h=this.getLineFeedCnt(0,t.piece.start,C),u=h-l;t.piece=new P(t.piece.bufferIndex,t.piece.start,C,h,o),this._lastChangeBufferPos=C,(0,I.updateTreeMetadata)(this,t,r.length,u)}nodeAt(t){let r=this.root;const i=this._searchCache.get(t);if(i)return{node:i.node,nodeStartOffset:i.nodeStartOffset,remainder:t-i.nodeStartOffset};let s=0;for(;r!==I.SENTINEL;)if(r.size_left>t)r=r.left;else if(r.size_left+r.piece.length>=t){s+=r.size_left;const d={node:r,remainder:t-r.size_left,nodeStartOffset:s};return this._searchCache.set(d),d}else t-=r.size_left+r.piece.length,s+=r.size_left+r.piece.length,r=r.right;return null}nodeAt2(t,r){let i=this.root,s=0;for(;i!==I.SENTINEL;)if(i.left!==I.SENTINEL&&i.lf_left>=t-1)i=i.left;else if(i.lf_left+i.piece.lineFeedCnt>t-1){const d=this.getAccumulatedValue(i,t-i.lf_left-2),p=this.getAccumulatedValue(i,t-i.lf_left-1);return s+=i.size_left,{node:i,remainder:Math.min(d+r-1,p),nodeStartOffset:s}}else if(i.lf_left+i.piece.lineFeedCnt===t-1){const d=this.getAccumulatedValue(i,t-i.lf_left-2);if(d+r-1<=i.piece.length)return{node:i,remainder:d+r-1,nodeStartOffset:s};r-=i.piece.length-d;break}else t-=i.lf_left+i.piece.lineFeedCnt,s+=i.size_left+i.piece.length,i=i.right;for(i=i.next();i!==I.SENTINEL;){if(i.piece.lineFeedCnt>0){const d=this.getAccumulatedValue(i,0),p=this.offsetOfNode(i);return{node:i,remainder:Math.min(r-1,d),nodeStartOffset:p}}else if(i.piece.length>=r-1){const d=this.offsetOfNode(i);return{node:i,remainder:r-1,nodeStartOffset:d}}else r-=i.piece.length;i=i.next()}return null}nodeCharCodeAt(t,r){if(t.piece.lineFeedCnt<1)return-1;const i=this._buffers[t.piece.bufferIndex],s=this.offsetInBuffer(t.piece.bufferIndex,t.piece.start)+r;return i.buffer.charCodeAt(s)}offsetOfNode(t){if(!t)return 0;let r=t.size_left;for(;t!==this.root;)t.parent.right===t&&(r+=t.parent.size_left+t.parent.piece.length),t=t.parent;return r}shouldCheckCRLF(){return!(this._EOLNormalized&&this._EOL===`
`)}startWithLF(t){if(typeof t=="string")return t.charCodeAt(0)===10;if(t===I.SENTINEL||t.piece.lineFeedCnt===0)return!1;const r=t.piece,i=this._buffers[r.bufferIndex].lineStarts,s=r.start.line,d=i[s]+r.start.column;return s===i.length-1||i[s+1]>d+1?!1:this._buffers[r.bufferIndex].buffer.charCodeAt(d)===10}endWithCR(t){return typeof t=="string"?t.charCodeAt(t.length-1)===13:t===I.SENTINEL||t.piece.lineFeedCnt===0?!1:this.nodeCharCodeAt(t,t.piece.length-1)===13}validateCRLFWithPrevNode(t){if(this.shouldCheckCRLF()&&this.startWithLF(t)){const r=t.prev();this.endWithCR(r)&&this.fixCRLF(r,t)}}validateCRLFWithNextNode(t){if(this.shouldCheckCRLF()&&this.endWithCR(t)){const r=t.next();this.startWithLF(r)&&this.fixCRLF(t,r)}}fixCRLF(t,r){const i=[],s=this._buffers[t.piece.bufferIndex].lineStarts;let d;t.piece.end.column===0?d={line:t.piece.end.line-1,column:s[t.piece.end.line]-s[t.piece.end.line-1]-1}:d={line:t.piece.end.line,column:t.piece.end.column-1};const p=t.piece.length-1,E=t.piece.lineFeedCnt-1;t.piece=new P(t.piece.bufferIndex,t.piece.start,d,E,p),(0,I.updateTreeMetadata)(this,t,-1,-1),t.piece.length===0&&i.push(t);const C={line:r.piece.start.line+1,column:0},o=r.piece.length-1,l=this.getLineFeedCnt(r.piece.bufferIndex,C,r.piece.end);r.piece=new P(r.piece.bufferIndex,C,r.piece.end,l,o),(0,I.updateTreeMetadata)(this,r,-1,-1),r.piece.length===0&&i.push(r);const h=this.createNewPieces(`\r
`);this.rbInsertRight(t,h[0]);for(let u=0;u<i.length;u++)(0,I.rbDelete)(this,i[u])}adjustCarriageReturnFromNext(t,r){if(this.shouldCheckCRLF()&&this.endWithCR(t)){const i=r.next();if(this.startWithLF(i)){if(t+=`
`,i.piece.length===1)(0,I.rbDelete)(this,i);else{const s=i.piece,d={line:s.start.line+1,column:0},p=s.length-1,E=this.getLineFeedCnt(s.bufferIndex,d,s.end);i.piece=new P(s.bufferIndex,d,s.end,E,p),(0,I.updateTreeMetadata)(this,i,-1,-1)}return!0}}return!1}iterate(t,r){if(t===I.SENTINEL)return r(I.SENTINEL);const i=this.iterate(t.left,r);return i&&r(t)&&this.iterate(t.right,r)}getNodeContent(t){if(t===I.SENTINEL)return"";const r=this._buffers[t.piece.bufferIndex];let i;const s=t.piece,d=this.offsetInBuffer(s.bufferIndex,s.start),p=this.offsetInBuffer(s.bufferIndex,s.end);return i=r.buffer.substring(d,p),i}getPieceContent(t){const r=this._buffers[t.bufferIndex],i=this.offsetInBuffer(t.bufferIndex,t.start),s=this.offsetInBuffer(t.bufferIndex,t.end);return r.buffer.substring(i,s)}rbInsertRight(t,r){const i=new I.TreeNode(r,1);if(i.left=I.SENTINEL,i.right=I.SENTINEL,i.parent=I.SENTINEL,i.size_left=0,i.lf_left=0,this.root===I.SENTINEL)this.root=i,i.color=0;else if(t.right===I.SENTINEL)t.right=i,i.parent=t;else{const d=(0,I.leftest)(t.right);d.left=i,i.parent=d}return(0,I.fixInsert)(this,i),i}rbInsertLeft(t,r){const i=new I.TreeNode(r,1);if(i.left=I.SENTINEL,i.right=I.SENTINEL,i.parent=I.SENTINEL,i.size_left=0,i.lf_left=0,this.root===I.SENTINEL)this.root=i,i.color=0;else if(t.left===I.SENTINEL)t.left=i,i.parent=t;else{const s=(0,I.righttest)(t.left);s.right=i,i.parent=s}return(0,I.fixInsert)(this,i),i}getContentOfSubTree(t){let r="";return this.iterate(t,i=>(r+=this.getNodeContent(i),!0)),r}}e.PieceTreeBase=c}),define(te[25],ne([0,1,18,2,11,24,10,20,22,5]),function(J,e,A,q,M,I,O,D,B,L){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.PieceTreeTextBuffer=void 0;class S extends L.Disposable{constructor(b,T,w,c,a,t,r){super();this._onDidChangeContent=this._register(new A.Emitter),this.onDidChangeContent=this._onDidChangeContent.event,this._BOM=T,this._mightContainNonBasicASCII=!t,this._mightContainRTL=c,this._mightContainUnusualLineTerminators=a,this._pieceTree=new O.PieceTreeBase(b,w,r)}equals(b){return!(b instanceof S)||this._BOM!==b._BOM||this.getEOL()!==b.getEOL()?!1:this._pieceTree.equal(b._pieceTree)}mightContainRTL(){return this._mightContainRTL}mightContainUnusualLineTerminators(){return this._mightContainUnusualLineTerminators}resetMightContainUnusualLineTerminators(){this._mightContainUnusualLineTerminators=!1}mightContainNonBasicASCII(){return this._mightContainNonBasicASCII}getBOM(){return this._BOM}getEOL(){return this._pieceTree.getEOL()}createSnapshot(b){return this._pieceTree.createSnapshot(b?this._BOM:"")}getOffsetAt(b,T){return this._pieceTree.getOffsetAt(b,T)}getPositionAt(b){return this._pieceTree.getPositionAt(b)}getRangeAt(b,T){const w=b+T,c=this.getPositionAt(b),a=this.getPositionAt(w);return new M.Range(c.lineNumber,c.column,a.lineNumber,a.column)}getValueInRange(b,T=0){if(b.isEmpty())return"";const w=this._getEndOfLine(T);return this._pieceTree.getValueInRange(b,w)}getValueLengthInRange(b,T=0){if(b.isEmpty())return 0;if(b.startLineNumber===b.endLineNumber)return b.endColumn-b.startColumn;const w=this.getOffsetAt(b.startLineNumber,b.startColumn);return this.getOffsetAt(b.endLineNumber,b.endColumn)-w}getCharacterCountInRange(b,T=0){if(this._mightContainNonBasicASCII){let w=0;const c=b.startLineNumber,a=b.endLineNumber;for(let t=c;t<=a;t++){const r=this.getLineContent(t),i=t===c?b.startColumn-1:0,s=t===a?b.endColumn-1:r.length;for(let d=i;d<s;d++)q.isHighSurrogate(r.charCodeAt(d))?(w=w+1,d=d+1):w=w+1}return w+=this._getEndOfLine(T).length*(a-c),w}return this.getValueLengthInRange(b,T)}getLength(){return this._pieceTree.getLength()}getLineCount(){return this._pieceTree.getLineCount()}getLinesContent(){return this._pieceTree.getLinesContent()}getLineContent(b){return this._pieceTree.getLineContent(b)}getLineCharCode(b,T){return this._pieceTree.getLineCharCode(b,T)}getCharCode(b){return this._pieceTree.getCharCode(b)}getLineLength(b){return this._pieceTree.getLineLength(b)}getLineMinColumn(b){return 1}getLineMaxColumn(b){return this.getLineLength(b)+1}getLineFirstNonWhitespaceColumn(b){const T=q.firstNonWhitespaceIndex(this.getLineContent(b));return T===-1?0:T+1}getLineLastNonWhitespaceColumn(b){const T=q.lastNonWhitespaceIndex(this.getLineContent(b));return T===-1?0:T+2}_getEndOfLine(b){switch(b){case 1:return`
`;case 2:return`\r
`;case 0:return this.getEOL();default:throw new Error("Unknown EOL preference")}}setEOL(b){this._pieceTree.setEOL(b)}applyEdits(b,T,w){let c=this._mightContainRTL,a=this._mightContainUnusualLineTerminators,t=this._mightContainNonBasicASCII,r=!0,i=[];for(let l=0;l<b.length;l++){const h=b[l];r&&h._isTracked&&(r=!1);const u=h.range;if(h.text){let j=!0;t||(j=!q.isBasicASCII(h.text),t=j),!c&&j&&(c=q.containsRTL(h.text)),!a&&j&&(a=q.containsUnusualLineTerminators(h.text))}let f="",N=0,m=0,F=0;if(h.text){let j;[N,m,F,j]=(0,D.countEOL)(h.text);const k=this.getEOL();j===0||j===(k===`\r
`?2:1)?f=h.text:f=h.text.replace(/\r\n|\r|\n/g,k)}i[l]={sortIndex:l,identifier:h.identifier||null,range:u,rangeOffset:this.getOffsetAt(u.startLineNumber,u.startColumn),rangeLength:this.getValueLengthInRange(u),text:f,eolCount:N,firstLineLength:m,lastLineLength:F,forceMoveMarkers:Boolean(h.forceMoveMarkers),isAutoWhitespaceEdit:h.isAutoWhitespaceEdit||!1}}i.sort(S._sortOpsAscending);let s=!1;for(let l=0,h=i.length-1;l<h;l++){const u=i[l].range.getEndPosition(),f=i[l+1].range.getStartPosition();if(f.isBeforeOrEqual(u)){if(f.isBefore(u))throw new Error("Overlapping ranges are not allowed!");s=!0}}r&&(i=this._reduceOperations(i));const d=w||T?S._getInverseEditRanges(i):[],p=[];if(T)for(let l=0;l<i.length;l++){const h=i[l],u=d[l];if(h.isAutoWhitespaceEdit&&h.range.isEmpty())for(let f=u.startLineNumber;f<=u.endLineNumber;f++){let N="";f===u.startLineNumber&&(N=this.getLineContent(h.range.startLineNumber),q.firstNonWhitespaceIndex(N)!==-1)||p.push({lineNumber:f,oldContent:N})}}let E=null;if(w){let l=0;E=[];for(let h=0;h<i.length;h++){const u=i[h],f=d[h],N=this.getValueInRange(u.range),m=u.rangeOffset+l;l+=u.text.length-N.length,E[h]={sortIndex:u.sortIndex,identifier:u.identifier,range:f,text:N,textChange:new B.TextChange(u.rangeOffset,N,m,u.text)}}s||E.sort((h,u)=>h.sortIndex-u.sortIndex)}this._mightContainRTL=c,this._mightContainUnusualLineTerminators=a,this._mightContainNonBasicASCII=t;const C=this._doApplyEdits(i);let o=null;if(T&&p.length>0){p.sort((l,h)=>h.lineNumber-l.lineNumber),o=[];for(let l=0,h=p.length;l<h;l++){const u=p[l].lineNumber;if(l>0&&p[l-1].lineNumber===u)continue;const f=p[l].oldContent,N=this.getLineContent(u);N.length===0||N===f||q.firstNonWhitespaceIndex(N)!==-1||o.push(u)}}return this._onDidChangeContent.fire(),new I.ApplyEditsResult(E,C,o)}_reduceOperations(b){return b.length<1e3?b:[this._toSingleEditOperation(b)]}_toSingleEditOperation(b){let T=!1;const w=b[0].range,c=b[b.length-1].range,a=new M.Range(w.startLineNumber,w.startColumn,c.endLineNumber,c.endColumn);let t=w.startLineNumber,r=w.startColumn;const i=[];for(let C=0,o=b.length;C<o;C++){const l=b[C],h=l.range;T=T||l.forceMoveMarkers,i.push(this.getValueInRange(new M.Range(t,r,h.startLineNumber,h.startColumn))),l.text.length>0&&i.push(l.text),t=h.endLineNumber,r=h.endColumn}const s=i.join(""),[d,p,E]=(0,D.countEOL)(s);return{sortIndex:0,identifier:b[0].identifier,range:a,rangeOffset:this.getOffsetAt(a.startLineNumber,a.startColumn),rangeLength:this.getValueLengthInRange(a,0),text:s,eolCount:d,firstLineLength:p,lastLineLength:E,forceMoveMarkers:T,isAutoWhitespaceEdit:!1}}_doApplyEdits(b){b.sort(S._sortOpsDescending);const T=[];for(let w=0;w<b.length;w++){const c=b[w],a=c.range.startLineNumber,t=c.range.startColumn,r=c.range.endLineNumber,i=c.range.endColumn;if(a===r&&t===i&&c.text.length===0)continue;c.text?(this._pieceTree.delete(c.rangeOffset,c.rangeLength),this._pieceTree.insert(c.rangeOffset,c.text,!0)):this._pieceTree.delete(c.rangeOffset,c.rangeLength);const s=new M.Range(a,t,r,i);T.push({range:s,rangeLength:c.rangeLength,text:c.text,rangeOffset:c.rangeOffset,forceMoveMarkers:c.forceMoveMarkers})}return T}findMatchesLineByLine(b,T,w,c){return this._pieceTree.findMatchesLineByLine(b,T,w,c)}getPieceTree(){return this._pieceTree}static _getInverseEditRange(b,T){const w=b.startLineNumber,c=b.startColumn,[a,t,r]=(0,D.countEOL)(T);let i;if(T.length>0){const s=a+1;s===1?i=new M.Range(w,c,w,c+t):i=new M.Range(w,c,w+s-1,r+1)}else i=new M.Range(w,c,w,c);return i}static _getInverseEditRanges(b){const T=[];let w=0,c=0,a=null;for(let t=0,r=b.length;t<r;t++){const i=b[t];let s,d;a?a.range.endLineNumber===i.range.startLineNumber?(s=w,d=c+(i.range.startColumn-a.range.endColumn)):(s=w+(i.range.startLineNumber-a.range.endLineNumber),d=i.range.startColumn):(s=i.range.startLineNumber,d=i.range.startColumn);let p;if(i.text.length>0){const E=i.eolCount+1;E===1?p=new M.Range(s,d,s,d+i.firstLineLength):p=new M.Range(s,d,s+E-1,i.lastLineLength+1)}else p=new M.Range(s,d,s,d);w=p.endLineNumber,c=p.endColumn,T.push(p),a=i}return T}static _sortOpsAscending(b,T){const w=M.Range.compareRangesUsingEnds(b.range,T.range);return w===0?b.sortIndex-T.sortIndex:w}static _sortOpsDescending(b,T){const w=M.Range.compareRangesUsingEnds(b.range,T.range);return w===0?T.sortIndex-b.sortIndex:-w}}e.PieceTreeTextBuffer=S}),define(te[26],ne([0,1,2,10,25]),function(J,e,A,q,M){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.PieceTreeTextBufferBuilder=e.PieceTreeTextBufferFactory=void 0;class I{constructor(B,L,S,P,b,T,w,c,a){this._chunks=B,this._bom=L,this._cr=S,this._lf=P,this._crlf=b,this._containsRTL=T,this._containsUnusualLineTerminators=w,this._isBasicASCII=c,this._normalizeEOL=a}_getEOL(B){const L=this._cr+this._lf+this._crlf,S=this._cr+this._crlf;return L===0?B===1?`
`:`\r
`:S>L/2?`\r
`:`
`}create(B){const L=this._getEOL(B),S=this._chunks;if(this._normalizeEOL&&(L===`\r
`&&(this._cr>0||this._lf>0)||L===`
`&&(this._cr>0||this._crlf>0)))for(let b=0,T=S.length;b<T;b++){const w=S[b].buffer.replace(/\r\n|\r|\n/g,L),c=(0,q.createLineStartsFast)(w);S[b]=new q.StringBuffer(w,c)}const P=new M.PieceTreeTextBuffer(S,this._bom,L,this._containsRTL,this._containsUnusualLineTerminators,this._isBasicASCII,this._normalizeEOL);return{textBuffer:P,disposable:P}}getFirstLineText(B){return this._chunks[0].buffer.substr(0,B).split(/\r\n|\r|\n/)[0]}}e.PieceTreeTextBufferFactory=I;class O{constructor(){this.chunks=[],this.BOM="",this._hasPreviousChar=!1,this._previousChar=0,this._tmpLineStarts=[],this.cr=0,this.lf=0,this.crlf=0,this.containsRTL=!1,this.containsUnusualLineTerminators=!1,this.isBasicASCII=!0}acceptChunk(B){if(B.length===0)return;this.chunks.length===0&&A.startsWithUTF8BOM(B)&&(this.BOM=A.UTF8_BOM_CHARACTER,B=B.substr(1));const L=B.charCodeAt(B.length-1);L===13||L>=55296&&L<=56319?(this._acceptChunk1(B.substr(0,B.length-1),!1),this._hasPreviousChar=!0,this._previousChar=L):(this._acceptChunk1(B,!1),this._hasPreviousChar=!1,this._previousChar=L)}_acceptChunk1(B,L){!L&&B.length===0||(this._hasPreviousChar?this._acceptChunk2(String.fromCharCode(this._previousChar)+B):this._acceptChunk2(B))}_acceptChunk2(B){const L=(0,q.createLineStarts)(this._tmpLineStarts,B);this.chunks.push(new q.StringBuffer(B,L.lineStarts)),this.cr+=L.cr,this.lf+=L.lf,this.crlf+=L.crlf,this.isBasicASCII&&(this.isBasicASCII=L.isBasicASCII),!this.isBasicASCII&&!this.containsRTL&&(this.containsRTL=A.containsRTL(B)),!this.isBasicASCII&&!this.containsUnusualLineTerminators&&(this.containsUnusualLineTerminators=A.containsUnusualLineTerminators(B))}finish(B=!0){return this._finish(),new I(this.chunks,this.BOM,this.cr,this.lf,this.crlf,this.containsRTL,this.containsUnusualLineTerminators,this.isBasicASCII,B)}_finish(){if(this.chunks.length===0&&this._acceptChunk1("",!0),this._hasPreviousChar){this._hasPreviousChar=!1;const B=this.chunks[this.chunks.length-1];B.buffer+=String.fromCharCode(this._previousChar);const L=(0,q.createLineStartsFast)(B.buffer);B.lineStarts=L,this._previousChar===13&&this.cr++}}}e.PieceTreeTextBufferBuilder=O}),define(te[27],ne([0,1]),function(J,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.refineServiceDecorator=e.createDecorator=e.IInstantiationService=e._util=void 0;var A;(function(O){O.serviceIds=new Map,O.DI_TARGET="$di$target",O.DI_DEPENDENCIES="$di$dependencies";function D(B){return B[O.DI_DEPENDENCIES]||[]}O.getServiceDependencies=D})(A=e._util||(e._util={})),e.IInstantiationService=M("instantiationService");function q(O,D,B,L){D[A.DI_TARGET]===D?D[A.DI_DEPENDENCIES].push({id:O,index:B,optional:L}):(D[A.DI_DEPENDENCIES]=[{id:O,index:B,optional:L}],D[A.DI_TARGET]=D)}function M(O){if(A.serviceIds.has(O))return A.serviceIds.get(O);const D=function(B,L,S){if(arguments.length!==3)throw new Error("@IServiceName-decorator can only be used to decorate a parameter");q(D,B,S,!1)};return D.toString=()=>O,A.serviceIds.set(O,D),D}e.createDecorator=M;function I(O){return O}e.refineServiceDecorator=I}),define(te[28],ne([0,1,3,2,27]),function(J,e,A,q,M){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.implies=e.SET_CONTEXT_COMMAND_ID=e.IContextKeyService=e.RawContextKey=e.ContextKeyNotRegexExpr=e.ContextKeyRegexExpr=e.ContextKeySmallerEqualsExpr=e.ContextKeySmallerExpr=e.ContextKeyGreaterEqualsExpr=e.ContextKeyGreaterExpr=e.ContextKeyNotExpr=e.ContextKeyNotEqualsExpr=e.ContextKeyNotInExpr=e.ContextKeyInExpr=e.ContextKeyEqualsExpr=e.ContextKeyDefinedExpr=e.ContextKeyTrueExpr=e.ContextKeyFalseExpr=e.expressionsAreEqualWithConstantSubstitution=e.ContextKeyExpr=e.ContextKeyExprType=void 0;const I=new Map;I.set("false",!1),I.set("true",!0),I.set("isMac",A.isMacintosh),I.set("isLinux",A.isLinux),I.set("isWindows",A.isWindows),I.set("isWeb",A.isWeb),I.set("isMacNative",A.isMacintosh&&!A.isWeb),I.set("isEdge",A.isEdge),I.set("isFirefox",A.isFirefox),I.set("isChrome",A.isChrome),I.set("isSafari",A.isSafari);const O=Object.prototype.hasOwnProperty;var D;(function(k){k[k.False=0]="False",k[k.True=1]="True",k[k.Defined=2]="Defined",k[k.Not=3]="Not",k[k.Equals=4]="Equals",k[k.NotEquals=5]="NotEquals",k[k.And=6]="And",k[k.Regex=7]="Regex",k[k.NotRegex=8]="NotRegex",k[k.Or=9]="Or",k[k.In=10]="In",k[k.NotIn=11]="NotIn",k[k.Greater=12]="Greater",k[k.GreaterEquals=13]="GreaterEquals",k[k.Smaller=14]="Smaller",k[k.SmallerEquals=15]="SmallerEquals"})(D=e.ContextKeyExprType||(e.ContextKeyExprType={}));class B{static false(){return P.INSTANCE}static true(){return b.INSTANCE}static has(n){return T.create(n)}static equals(n,_){return w.create(n,_)}static notEquals(n,_){return t.create(n,_)}static regex(n,_){return C.create(n,_)}static in(n,_){return c.create(n,_)}static not(n){return r.create(n)}static and(...n){return h.create(n,null)}static or(...n){return u.create(n,null,!0)}static greater(n,_){return s.create(n,_)}static greaterEquals(n,_){return d.create(n,_)}static smaller(n,_){return p.create(n,_)}static smallerEquals(n,_){return E.create(n,_)}static deserialize(n,_=!1){if(!!n)return this._deserializeOrExpression(n,_)}static _deserializeOrExpression(n,_){let v=n.split("||");return u.create(v.map(V=>this._deserializeAndExpression(V,_)),null,!0)}static _deserializeAndExpression(n,_){let v=n.split("&&");return h.create(v.map(V=>this._deserializeOne(V,_)),null)}static _deserializeOne(n,_){if(n=n.trim(),n.indexOf("!=")>=0){let v=n.split("!=");return t.create(v[0].trim(),this._deserializeValue(v[1],_))}if(n.indexOf("==")>=0){let v=n.split("==");return w.create(v[0].trim(),this._deserializeValue(v[1],_))}if(n.indexOf("=~")>=0){let v=n.split("=~");return C.create(v[0].trim(),this._deserializeRegexValue(v[1],_))}if(n.indexOf(" in ")>=0){let v=n.split(" in ");return c.create(v[0].trim(),v[1].trim())}if(/^[^<=>]+>=[^<=>]+$/.test(n)){const v=n.split(">=");return d.create(v[0].trim(),v[1].trim())}if(/^[^<=>]+>[^<=>]+$/.test(n)){const v=n.split(">");return s.create(v[0].trim(),v[1].trim())}if(/^[^<=>]+<=[^<=>]+$/.test(n)){const v=n.split("<=");return E.create(v[0].trim(),v[1].trim())}if(/^[^<=>]+<[^<=>]+$/.test(n)){const v=n.split("<");return p.create(v[0].trim(),v[1].trim())}return/^\!\s*/.test(n)?r.create(n.substr(1).trim()):T.create(n)}static _deserializeValue(n,_){if(n=n.trim(),n==="true")return!0;if(n==="false")return!1;let v=/^'([^']*)'$/.exec(n);return v?v[1].trim():n}static _deserializeRegexValue(n,_){if((0,q.isFalsyOrWhitespace)(n)){if(_)throw new Error("missing regexp-value for =~-expression");return console.warn("missing regexp-value for =~-expression"),null}let v=n.indexOf("/"),V=n.lastIndexOf("/");if(v===V||v<0){if(_)throw new Error(`bad regexp-value '${n}', missing /-enclosure`);return console.warn(`bad regexp-value '${n}', missing /-enclosure`),null}let x=n.slice(v+1,V),Q=n[V+1]==="i"?"i":"";try{return new RegExp(x,Q)}catch(Z){if(_)throw new Error(`bad regexp-value '${n}', parse error: ${Z}`);return console.warn(`bad regexp-value '${n}', parse error: ${Z}`),null}}}e.ContextKeyExpr=B;function L(k,n){const _=k?k.substituteConstants():void 0,v=n?n.substituteConstants():void 0;return!_&&!v?!0:!_||!v?!1:_.equals(v)}e.expressionsAreEqualWithConstantSubstitution=L;function S(k,n){return k.cmp(n)}class P{constructor(){this.type=0}cmp(n){return this.type-n.type}equals(n){return n.type===this.type}substituteConstants(){return this}evaluate(n){return!1}serialize(){return"false"}keys(){return[]}map(n){return this}negate(){return b.INSTANCE}}e.ContextKeyFalseExpr=P,P.INSTANCE=new P;class b{constructor(){this.type=1}cmp(n){return this.type-n.type}equals(n){return n.type===this.type}substituteConstants(){return this}evaluate(n){return!0}serialize(){return"true"}keys(){return[]}map(n){return this}negate(){return P.INSTANCE}}e.ContextKeyTrueExpr=b,b.INSTANCE=new b;class T{constructor(n,_){this.key=n,this.negated=_,this.type=2}static create(n,_=null){const v=I.get(n);return typeof v=="boolean"?v?b.INSTANCE:P.INSTANCE:new T(n,_)}cmp(n){return n.type!==this.type?this.type-n.type:N(this.key,n.key)}equals(n){return n.type===this.type?this.key===n.key:!1}substituteConstants(){const n=I.get(this.key);return typeof n=="boolean"?n?b.INSTANCE:P.INSTANCE:this}evaluate(n){return!!n.getValue(this.key)}serialize(){return this.key}keys(){return[this.key]}map(n){return n.mapDefined(this.key)}negate(){return this.negated||(this.negated=r.create(this.key,this)),this.negated}}e.ContextKeyDefinedExpr=T;class w{constructor(n,_,v){this.key=n,this.value=_,this.negated=v,this.type=4}static create(n,_,v=null){if(typeof _=="boolean")return _?T.create(n,v):r.create(n,v);const V=I.get(n);return typeof V=="boolean"?_===(V?"true":"false")?b.INSTANCE:P.INSTANCE:new w(n,_,v)}cmp(n){return n.type!==this.type?this.type-n.type:m(this.key,this.value,n.key,n.value)}equals(n){return n.type===this.type?this.key===n.key&&this.value===n.value:!1}substituteConstants(){const n=I.get(this.key);if(typeof n=="boolean"){const _=n?"true":"false";return this.value===_?b.INSTANCE:P.INSTANCE}return this}evaluate(n){return n.getValue(this.key)==this.value}serialize(){return`${this.key} == '${this.value}'`}keys(){return[this.key]}map(n){return n.mapEquals(this.key,this.value)}negate(){return this.negated||(this.negated=t.create(this.key,this.value,this)),this.negated}}e.ContextKeyEqualsExpr=w;class c{constructor(n,_){this.key=n,this.valueKey=_,this.type=10,this.negated=null}static create(n,_){return new c(n,_)}cmp(n){return n.type!==this.type?this.type-n.type:m(this.key,this.valueKey,n.key,n.valueKey)}equals(n){return n.type===this.type?this.key===n.key&&this.valueKey===n.valueKey:!1}substituteConstants(){return this}evaluate(n){const _=n.getValue(this.valueKey),v=n.getValue(this.key);return Array.isArray(_)?_.indexOf(v)>=0:typeof v=="string"&&typeof _=="object"&&_!==null?O.call(_,v):!1}serialize(){return`${this.key} in '${this.valueKey}'`}keys(){return[this.key,this.valueKey]}map(n){return n.mapIn(this.key,this.valueKey)}negate(){return this.negated||(this.negated=a.create(this)),this.negated}}e.ContextKeyInExpr=c;class a{constructor(n){this._actual=n,this.type=11}static create(n){return new a(n)}cmp(n){return n.type!==this.type?this.type-n.type:this._actual.cmp(n._actual)}equals(n){return n.type===this.type?this._actual.equals(n._actual):!1}substituteConstants(){return this}evaluate(n){return!this._actual.evaluate(n)}serialize(){throw new Error("Method not implemented.")}keys(){return this._actual.keys()}map(n){return new a(this._actual.map(n))}negate(){return this._actual}}e.ContextKeyNotInExpr=a;class t{constructor(n,_,v){this.key=n,this.value=_,this.negated=v,this.type=5}static create(n,_,v=null){if(typeof _=="boolean")return _?r.create(n,v):T.create(n,v);const V=I.get(n);return typeof V=="boolean"?_===(V?"true":"false")?P.INSTANCE:b.INSTANCE:new t(n,_,v)}cmp(n){return n.type!==this.type?this.type-n.type:m(this.key,this.value,n.key,n.value)}equals(n){return n.type===this.type?this.key===n.key&&this.value===n.value:!1}substituteConstants(){const n=I.get(this.key);if(typeof n=="boolean"){const _=n?"true":"false";return this.value===_?P.INSTANCE:b.INSTANCE}return this}evaluate(n){return n.getValue(this.key)!=this.value}serialize(){return`${this.key} != '${this.value}'`}keys(){return[this.key]}map(n){return n.mapNotEquals(this.key,this.value)}negate(){return this.negated||(this.negated=w.create(this.key,this.value,this)),this.negated}}e.ContextKeyNotEqualsExpr=t;class r{constructor(n,_){this.key=n,this.negated=_,this.type=3}static create(n,_=null){const v=I.get(n);return typeof v=="boolean"?v?P.INSTANCE:b.INSTANCE:new r(n,_)}cmp(n){return n.type!==this.type?this.type-n.type:N(this.key,n.key)}equals(n){return n.type===this.type?this.key===n.key:!1}substituteConstants(){const n=I.get(this.key);return typeof n=="boolean"?n?P.INSTANCE:b.INSTANCE:this}evaluate(n){return!n.getValue(this.key)}serialize(){return`!${this.key}`}keys(){return[this.key]}map(n){return n.mapNot(this.key)}negate(){return this.negated||(this.negated=T.create(this.key,this)),this.negated}}e.ContextKeyNotExpr=r;function i(k,n){if(typeof k=="string"){const _=parseFloat(k);isNaN(_)||(k=_)}return typeof k=="string"||typeof k=="number"?n(k):P.INSTANCE}class s{constructor(n,_,v){this.key=n,this.value=_,this.negated=v,this.type=12}static create(n,_,v=null){return i(_,V=>new s(n,V,v))}cmp(n){return n.type!==this.type?this.type-n.type:m(this.key,this.value,n.key,n.value)}equals(n){return n.type===this.type?this.key===n.key&&this.value===n.value:!1}substituteConstants(){return this}evaluate(n){return typeof this.value=="string"?!1:parseFloat(n.getValue(this.key))>this.value}serialize(){return`${this.key} > ${this.value}`}keys(){return[this.key]}map(n){return n.mapGreater(this.key,this.value)}negate(){return this.negated||(this.negated=E.create(this.key,this.value,this)),this.negated}}e.ContextKeyGreaterExpr=s;class d{constructor(n,_,v){this.key=n,this.value=_,this.negated=v,this.type=13}static create(n,_,v=null){return i(_,V=>new d(n,V,v))}cmp(n){return n.type!==this.type?this.type-n.type:m(this.key,this.value,n.key,n.value)}equals(n){return n.type===this.type?this.key===n.key&&this.value===n.value:!1}substituteConstants(){return this}evaluate(n){return typeof this.value=="string"?!1:parseFloat(n.getValue(this.key))>=this.value}serialize(){return`${this.key} >= ${this.value}`}keys(){return[this.key]}map(n){return n.mapGreaterEquals(this.key,this.value)}negate(){return this.negated||(this.negated=p.create(this.key,this.value,this)),this.negated}}e.ContextKeyGreaterEqualsExpr=d;class p{constructor(n,_,v){this.key=n,this.value=_,this.negated=v,this.type=14}static create(n,_,v=null){return i(_,V=>new p(n,V,v))}cmp(n){return n.type!==this.type?this.type-n.type:m(this.key,this.value,n.key,n.value)}equals(n){return n.type===this.type?this.key===n.key&&this.value===n.value:!1}substituteConstants(){return this}evaluate(n){return typeof this.value=="string"?!1:parseFloat(n.getValue(this.key))<this.value}serialize(){return`${this.key} < ${this.value}`}keys(){return[this.key]}map(n){return n.mapSmaller(this.key,this.value)}negate(){return this.negated||(this.negated=d.create(this.key,this.value,this)),this.negated}}e.ContextKeySmallerExpr=p;class E{constructor(n,_,v){this.key=n,this.value=_,this.negated=v,this.type=15}static create(n,_,v=null){return i(_,V=>new E(n,V,v))}cmp(n){return n.type!==this.type?this.type-n.type:m(this.key,this.value,n.key,n.value)}equals(n){return n.type===this.type?this.key===n.key&&this.value===n.value:!1}substituteConstants(){return this}evaluate(n){return typeof this.value=="string"?!1:parseFloat(n.getValue(this.key))<=this.value}serialize(){return`${this.key} <= ${this.value}`}keys(){return[this.key]}map(n){return n.mapSmallerEquals(this.key,this.value)}negate(){return this.negated||(this.negated=s.create(this.key,this.value,this)),this.negated}}e.ContextKeySmallerEqualsExpr=E;class C{constructor(n,_){this.key=n,this.regexp=_,this.type=7,this.negated=null}static create(n,_){return new C(n,_)}cmp(n){if(n.type!==this.type)return this.type-n.type;if(this.key<n.key)return-1;if(this.key>n.key)return 1;const _=this.regexp?this.regexp.source:"",v=n.regexp?n.regexp.source:"";return _<v?-1:_>v?1:0}equals(n){if(n.type===this.type){const _=this.regexp?this.regexp.source:"",v=n.regexp?n.regexp.source:"";return this.key===n.key&&_===v}return!1}substituteConstants(){return this}evaluate(n){let _=n.getValue(this.key);return this.regexp?this.regexp.test(_):!1}serialize(){const n=this.regexp?`/${this.regexp.source}/${this.regexp.ignoreCase?"i":""}`:"/invalid/";return`${this.key} =~ ${n}`}keys(){return[this.key]}map(n){return n.mapRegex(this.key,this.regexp)}negate(){return this.negated||(this.negated=o.create(this)),this.negated}}e.ContextKeyRegexExpr=C;class o{constructor(n){this._actual=n,this.type=8}static create(n){return new o(n)}cmp(n){return n.type!==this.type?this.type-n.type:this._actual.cmp(n._actual)}equals(n){return n.type===this.type?this._actual.equals(n._actual):!1}substituteConstants(){return this}evaluate(n){return!this._actual.evaluate(n)}serialize(){throw new Error("Method not implemented.")}keys(){return this._actual.keys()}map(n){return new o(this._actual.map(n))}negate(){return this._actual}}e.ContextKeyNotRegexExpr=o;function l(k){let n=null;for(let _=0,v=k.length;_<v;_++){const V=k[_].substituteConstants();if(k[_]!==V&&n===null){n=[];for(let x=0;x<_;x++)n[x]=k[x]}n!==null&&(n[_]=V)}return n===null?k:n}class h{constructor(n,_){this.expr=n,this.negated=_,this.type=6}static create(n,_){return h._normalizeArr(n,_)}cmp(n){if(n.type!==this.type)return this.type-n.type;if(this.expr.length<n.expr.length)return-1;if(this.expr.length>n.expr.length)return 1;for(let _=0,v=this.expr.length;_<v;_++){const V=S(this.expr[_],n.expr[_]);if(V!==0)return V}return 0}equals(n){if(n.type===this.type){if(this.expr.length!==n.expr.length)return!1;for(let _=0,v=this.expr.length;_<v;_++)if(!this.expr[_].equals(n.expr[_]))return!1;return!0}return!1}substituteConstants(){const n=l(this.expr);return n===this.expr?this:h.create(n,this.negated)}evaluate(n){for(let _=0,v=this.expr.length;_<v;_++)if(!this.expr[_].evaluate(n))return!1;return!0}static _normalizeArr(n,_){const v=[];let V=!1;for(const x of n)if(!!x){if(x.type===1){V=!0;continue}if(x.type===0)return P.INSTANCE;if(x.type===6){v.push(...x.expr);continue}v.push(x)}if(v.length===0&&V)return b.INSTANCE;if(v.length!==0){if(v.length===1)return v[0];v.sort(S);for(let x=1;x<v.length;x++)v[x-1].equals(v[x])&&(v.splice(x,1),x--);if(v.length===1)return v[0];for(;v.length>1;){const x=v[v.length-1];if(x.type!==9)break;v.pop();const Q=v.pop(),Z=v.length===0,z=u.create(x.expr.map(K=>h.create([K,Q],null)),null,Z);z&&(v.push(z),v.sort(S))}return v.length===1?v[0]:new h(v,_)}}serialize(){return this.expr.map(n=>n.serialize()).join(" && ")}keys(){const n=[];for(let _ of this.expr)n.push(..._.keys());return n}map(n){return new h(this.expr.map(_=>_.map(n)),null)}negate(){if(!this.negated){const n=[];for(let _ of this.expr)n.push(_.negate());this.negated=u.create(n,this,!0)}return this.negated}}class u{constructor(n,_){this.expr=n,this.negated=_,this.type=9}static create(n,_,v){return u._normalizeArr(n,_,v)}cmp(n){if(n.type!==this.type)return this.type-n.type;if(this.expr.length<n.expr.length)return-1;if(this.expr.length>n.expr.length)return 1;for(let _=0,v=this.expr.length;_<v;_++){const V=S(this.expr[_],n.expr[_]);if(V!==0)return V}return 0}equals(n){if(n.type===this.type){if(this.expr.length!==n.expr.length)return!1;for(let _=0,v=this.expr.length;_<v;_++)if(!this.expr[_].equals(n.expr[_]))return!1;return!0}return!1}substituteConstants(){const n=l(this.expr);return n===this.expr?this:u.create(n,this.negated,!1)}evaluate(n){for(let _=0,v=this.expr.length;_<v;_++)if(this.expr[_].evaluate(n))return!0;return!1}static _normalizeArr(n,_,v){let V=[],x=!1;if(n){for(let Q=0,Z=n.length;Q<Z;Q++){const z=n[Q];if(!!z){if(z.type===0){x=!0;continue}if(z.type===1)return b.INSTANCE;if(z.type===9){V=V.concat(z.expr);continue}V.push(z)}}if(V.length===0&&x)return P.INSTANCE;V.sort(S)}if(V.length!==0){if(V.length===1)return V[0];for(let Q=1;Q<V.length;Q++)V[Q-1].equals(V[Q])&&(V.splice(Q,1),Q--);if(V.length===1)return V[0];if(v){for(let Q=0;Q<V.length;Q++)for(let Z=Q+1;Z<V.length;Z++)F(V[Q],V[Z])&&(V.splice(Z,1),Z--);if(V.length===1)return V[0]}return new u(V,_)}}serialize(){return this.expr.map(n=>n.serialize()).join(" || ")}keys(){const n=[];for(let _ of this.expr)n.push(..._.keys());return n}map(n){return new u(this.expr.map(_=>_.map(n)),null)}negate(){if(!this.negated){let n=[];for(let _ of this.expr)n.push(_.negate());for(;n.length>1;){const _=n.shift(),v=n.shift(),V=[];for(const Q of j(_))for(const Z of j(v))V.push(h.create([Q,Z],null));const x=n.length===0;n.unshift(u.create(V,null,x))}this.negated=n[0]}return this.negated}}class f extends T{constructor(n,_,v){super(n,null);this._defaultValue=_,typeof v=="object"?f._info.push({...v,key:n}):v!==!0&&f._info.push({key:n,description:v,type:_!=null?typeof _:void 0})}static all(){return f._info.values()}bindTo(n){return n.createKey(this.key,this._defaultValue)}getValue(n){return n.getContextKeyValue(this.key)}toNegated(){return this.negate()}isEqualTo(n){return w.create(this.key,n)}notEqualsTo(n){return t.create(this.key,n)}}e.RawContextKey=f,f._info=[],e.IContextKeyService=(0,M.createDecorator)("contextKeyService"),e.SET_CONTEXT_COMMAND_ID="setContext";function N(k,n){return k<n?-1:k>n?1:0}function m(k,n,_,v){return k<_?-1:k>_?1:n<v?-1:n>v?1:0}function F(k,n){if(n.type===6&&k.type!==9&&k.type!==6){for(const V of n.expr)if(k.equals(V))return!0}const _=k.negate(),v=j(_).concat(j(n));v.sort(S);for(let V=0;V<v.length;V++){const Q=v[V].negate();for(let Z=V+1;Z<v.length;Z++){const z=v[Z];if(Q.equals(z))return!0}}return!1}e.implies=F;function j(k){return k.type===9?k.expr:[k]}}),define(te[29],ne([0,1,19,35,12,8,4,3,28]),function(J,e,A,q,M,I,O,D,B){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.NotebookWorkingCopyTypeIdentifier=e.CellStatusbarAlignment=e.NotebookSetting=e.CellSequence=e.notebookDocumentFilterMatch=e.isDocumentExcludePattern=e.NotebookEditorPriority=e.NOTEBOOK_EDITOR_CURSOR_BOUNDARY=e.diff=e.MimeTypeDisplayOrder=e.mimeTypeIsMergeable=e.mimeTypeSupportedByCore=e.mimeTypeIsAlwaysSecure=e.CellUri=e.CellEditType=e.SelectionStateType=e.NotebookCellsChangeType=e.RendererMessagingSpec=e.NotebookRendererMatch=e.NotebookCellExecutionState=e.NotebookRunState=e.RENDERER_NOT_AVAILABLE=e.BUILTIN_RENDERER_ID=e.RENDERER_EQUIVALENT_EXTENSIONS=e.ACCESSIBLE_NOTEBOOK_DISPLAY_ORDER=e.NOTEBOOK_DISPLAY_ORDER=e.CellKind=e.NOTEBOOK_DIFF_EDITOR_ID=e.NOTEBOOK_EDITOR_ID=void 0,e.NOTEBOOK_EDITOR_ID="workbench.editor.notebook",e.NOTEBOOK_DIFF_EDITOR_ID="workbench.editor.notebookTextDiffEditor";var L;(function(m){m[m.Markup=1]="Markup",m[m.Code=2]="Code"})(L=e.CellKind||(e.CellKind={})),e.NOTEBOOK_DISPLAY_ORDER=["application/json","application/javascript","text/html","image/svg+xml",M.Mimes.latex,M.Mimes.markdown,"image/png","image/jpeg",M.Mimes.text],e.ACCESSIBLE_NOTEBOOK_DISPLAY_ORDER=[M.Mimes.latex,M.Mimes.markdown,"application/json",M.Mimes.text,"text/html","image/svg+xml","image/png","image/jpeg"],e.RENDERER_EQUIVALENT_EXTENSIONS=new Map([["ms-toolsai.jupyter",new Set(["jupyter-notebook","interactive"])],["ms-toolsai.jupyter-renderers",new Set(["jupyter-notebook","interactive"])]]),e.BUILTIN_RENDERER_ID="_builtin",e.RENDERER_NOT_AVAILABLE="_notAvailable";var S;(function(m){m[m.Running=1]="Running",m[m.Idle=2]="Idle"})(S=e.NotebookRunState||(e.NotebookRunState={}));var P;(function(m){m[m.Pending=2]="Pending",m[m.Executing=3]="Executing"})(P=e.NotebookCellExecutionState||(e.NotebookCellExecutionState={}));var b;(function(m){m[m.WithHardKernelDependency=0]="WithHardKernelDependency",m[m.WithOptionalKernelDependency=1]="WithOptionalKernelDependency",m[m.Pure=2]="Pure",m[m.Never=3]="Never"})(b=e.NotebookRendererMatch||(e.NotebookRendererMatch={}));var T;(function(m){m.Always="always",m.Never="never",m.Optional="optional"})(T=e.RendererMessagingSpec||(e.RendererMessagingSpec={}));var w;(function(m){m[m.ModelChange=1]="ModelChange",m[m.Move=2]="Move",m[m.ChangeLanguage=5]="ChangeLanguage",m[m.Initialize=6]="Initialize",m[m.ChangeCellMetadata=7]="ChangeCellMetadata",m[m.Output=8]="Output",m[m.OutputItem=9]="OutputItem",m[m.ChangeCellContent=10]="ChangeCellContent",m[m.ChangeDocumentMetadata=11]="ChangeDocumentMetadata",m[m.ChangeCellInternalMetadata=12]="ChangeCellInternalMetadata",m[m.ChangeCellMime=13]="ChangeCellMime",m[m.Unknown=100]="Unknown"})(w=e.NotebookCellsChangeType||(e.NotebookCellsChangeType={}));var c;(function(m){m[m.Handle=0]="Handle",m[m.Index=1]="Index"})(c=e.SelectionStateType||(e.SelectionStateType={}));var a;(function(m){m[m.Replace=1]="Replace",m[m.Output=2]="Output",m[m.Metadata=3]="Metadata",m[m.CellLanguage=4]="CellLanguage",m[m.DocumentMetadata=5]="DocumentMetadata",m[m.Move=6]="Move",m[m.OutputItems=7]="OutputItems",m[m.PartialMetadata=8]="PartialMetadata",m[m.PartialInternalMetadata=9]="PartialInternalMetadata"})(a=e.CellEditType||(e.CellEditType={}));var t;(function(m){m.scheme=I.Schemas.vscodeNotebookCell;const F=/^ch(\d{7,})/;function j(x,Q){return x.with({scheme:m.scheme,fragment:`ch${Q.toString().padStart(7,"0")}${x.scheme!==I.Schemas.file?x.scheme:""}`})}m.generate=j;function k(x){if(x.scheme!==m.scheme)return;const Q=F.exec(x.fragment);return Q?{handle:Number(Q[1]),notebook:x.with({scheme:x.fragment.substring(Q[0].length)||I.Schemas.file,fragment:null})}:void 0}m.parse=k;function n(x,Q,Z){return x.with({scheme:I.Schemas.vscodeNotebookCellOutput,fragment:`ch${Q.toString().padStart(7,"0")},${Z??""},${x.scheme!==I.Schemas.file?x.scheme:""}`})}m.generateCellOutputUri=n;function _(x){if(x.scheme!==I.Schemas.vscodeNotebookCellOutput)return;const Q=/^ch(\d{7,})\,([0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12})?\,(.*)$/i.exec(x.fragment);if(!Q)return;const Z=Number(Q[1]),z=Q[2]&&Q[2]!==""?Q[2]:void 0,K=Q[3];return{handle:Z,outputId:z,notebook:x.with({scheme:K||I.Schemas.file,fragment:null})}}m.parseCellOutputUri=_;function v(x,Q,Z){return x.with({scheme:Z,fragment:`ch${Q.toString().padStart(7,"0")}${x.scheme!==I.Schemas.file?x.scheme:""}`})}m.generateCellUri=v;function V(x,Q){if(x.scheme!==Q)return;const Z=F.exec(x.fragment);return Z?{handle:Number(Z[1]),notebook:x.with({scheme:x.fragment.substring(Z[0].length)||I.Schemas.file,fragment:null})}:void 0}m.parseCellUri=V})(t=e.CellUri||(e.CellUri={}));const r=new Map([["image/git",{alwaysSecure:!0,supportedByCore:!0}],["application/json",{alwaysSecure:!0,supportedByCore:!0}],[M.Mimes.text,{alwaysSecure:!0,supportedByCore:!0}],["text/x-javascript",{alwaysSecure:!0,supportedByCore:!0}],["application/vnd.code.notebook.stdout",{alwaysSecure:!0,supportedByCore:!0,mergeable:!0}],["application/vnd.code.notebook.stderr",{alwaysSecure:!0,supportedByCore:!0,mergeable:!0}]]);function i(m){return r.get(m)?.alwaysSecure??!1}e.mimeTypeIsAlwaysSecure=i;function s(m){return r.get(m)?.supportedByCore??!1}e.mimeTypeSupportedByCore=s;function d(m){return r.get(m)?.mergeable??!1}e.mimeTypeIsMergeable=d;const p=m=>D.isWindows?m.replace(/\//g,"\\"):m;class E{constructor(F=[],j=e.NOTEBOOK_DISPLAY_ORDER){this.defaultOrder=j,this.order=[...new Set(F)].map(k=>({pattern:k,matches:A.parse(p(k))}))}sort(F){const j=new Map(q.Iterable.map(F,n=>[n,p(n)]));let k=[];for(const{matches:n}of this.order)for(const[_,v]of j)if(n(v)){k.push(_),j.delete(_);break}return j.size&&(k=k.concat([...j.keys()].sort((n,_)=>this.defaultOrder.indexOf(n)-this.defaultOrder.indexOf(_)))),k}prioritize(F,j){const k=this.findIndex(F);if(k===-1){this.order.unshift({pattern:F,matches:A.parse(p(F))});return}const n=new Set(j.map(v=>this.findIndex(v,k)));n.delete(-1);const _=Array.from(n).sort();this.order.splice(k+1,0,..._.map(v=>this.order[v]));for(let v=_.length-1;v>=0;v--)this.order.splice(_[v],1)}toArray(){return this.order.map(F=>F.pattern)}findIndex(F,j=this.order.length){const k=p(F);for(let n=0;n<j;n++)if(this.order[n].matches(k))return n;return-1}}e.MimeTypeDisplayOrder=E;function C(m,F,j,k=(n,_)=>n===_){const n=[];function _(x,Q,Z){if(Q===0&&Z.length===0)return;const z=n[n.length-1];z&&z.start+z.deleteCount===x?(z.deleteCount+=Q,z.toInsert.push(...Z)):n.push({start:x,deleteCount:Q,toInsert:Z})}let v=0,V=0;for(;;){if(v===m.length){_(v,0,F.slice(V));break}if(V===F.length){_(v,m.length-v,[]);break}const x=m[v],Q=F[V];if(k(x,Q)){v+=1,V+=1;continue}j(Q)?(_(v,1,[]),v+=1):(_(v,0,[Q]),V+=1)}return n}e.diff=C,e.NOTEBOOK_EDITOR_CURSOR_BOUNDARY=new B.RawContextKey("notebookEditorCursorAtBoundary","none");var o;(function(m){m.default="default",m.option="option"})(o=e.NotebookEditorPriority||(e.NotebookEditorPriority={}));function l(m){const F=m;return!!((typeof F.include=="string"||A.isRelativePattern(F.include))&&(typeof F.exclude=="string"||A.isRelativePattern(F.exclude)))}e.isDocumentExcludePattern=l;function h(m,F,j){if(Array.isArray(m.viewType)&&m.viewType.indexOf(F)>=0||m.viewType===F)return!0;if(m.filenamePattern){const k=l(m.filenamePattern)?m.filenamePattern.include:m.filenamePattern,n=l(m.filenamePattern)?m.filenamePattern.exclude:void 0;if(A.match(k,(0,O.basename)(j.fsPath).toLowerCase()))return!(n&&A.match(n,(0,O.basename)(j.fsPath).toLowerCase()))}return!1}e.notebookDocumentFilterMatch=h;class u{constructor(F){this.textModel=F}getElements(){const F=new Int32Array(this.textModel.cells.length);for(let j=0;j<this.textModel.cells.length;j++)F[j]=this.textModel.cells[j].getHashValue();return F}}e.CellSequence=u,e.NotebookSetting={displayOrder:"notebook.displayOrder",cellToolbarLocation:"notebook.cellToolbarLocation",cellToolbarVisibility:"notebook.cellToolbarVisibility",showCellStatusBar:"notebook.showCellStatusBar",textDiffEditorPreview:"notebook.diff.enablePreview",experimentalInsertToolbarAlignment:"notebook.experimental.insertToolbarAlignment",compactView:"notebook.compactView",focusIndicator:"notebook.cellFocusIndicator",insertToolbarLocation:"notebook.insertToolbarLocation",globalToolbar:"notebook.globalToolbar",undoRedoPerCell:"notebook.undoRedoPerCell",consolidatedOutputButton:"notebook.consolidatedOutputButton",showFoldingControls:"notebook.showFoldingControls",dragAndDropEnabled:"notebook.dragAndDropEnabled",cellEditorOptionsCustomizations:"notebook.editorOptionsCustomizations",consolidatedRunButton:"notebook.consolidatedRunButton",openGettingStarted:"notebook.experimental.openGettingStarted",textOutputLineLimit:"notebook.output.textLineLimit",globalToolbarShowLabel:"notebook.globalToolbarShowLabel",markupFontSize:"notebook.markup.fontSize",interactiveWindowCollapseCodeCells:"interactiveWindow.collapseCellInputCode"};var f;(function(m){m[m.Left=1]="Left",m[m.Right=2]="Right"})(f=e.CellStatusbarAlignment||(e.CellStatusbarAlignment={}));class N{static create(F){return`${N._prefix}${F}`}static parse(F){if(F.startsWith(N._prefix))return F.substring(N._prefix.length)}}e.NotebookWorkingCopyTypeIdentifier=N,N._prefix="notebook/"}),define(te[36],ne([0,1,37,38,9,26,29,11]),function(J,e,A,q,M,I,O,D){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.create=e.NotebookEditorSimpleWorker=e.CellSequence=void 0;function B(w){let c=(0,q.numberHash)(104579,0);for(let a=0;a<w.buffer.length;a++)c=(0,q.doHash)(w.buffer[a],c);return c}class L{constructor(c,a,t,r,i,s,d){this.handle=c,this._source=a,this.language=t,this.cellKind=r,this.outputs=i,this.metadata=s,this.internalMetadata=d,this._primaryKey=null,this._hash=null}get textBuffer(){if(this._textBuffer)return this._textBuffer;const c=new I.PieceTreeTextBufferBuilder;c.acceptChunk(Array.isArray(this._source)?this._source.join(`
`):this._source);const a=c.finish(!0);return this._textBuffer=a.create(1).textBuffer,this._textBuffer}primaryKey(){return this._primaryKey===void 0&&(this._primaryKey=(0,q.hash)(this.getValue())),this._primaryKey}getFullModelRange(){const c=this.textBuffer.getLineCount();return new D.Range(1,1,c,this.textBuffer.getLineLength(c)+1)}getValue(){const c=this.getFullModelRange();return this.textBuffer.getEOL()===`
`?this.textBuffer.getValueInRange(c,1):this.textBuffer.getValueInRange(c,2)}getComparisonValue(){return this._primaryKey!==null?this._primaryKey:(this._hash=(0,q.hash)([(0,q.hash)(this.language),(0,q.hash)(this.getValue()),this.metadata,this.internalMetadata,this.outputs.map(c=>({outputs:c.outputs.map(a=>({mime:a.mime,data:B(a.data)})),metadata:c.metadata}))]),this._hash)}getHashValue(){return this._hash!==null?this._hash:(this._hash=(0,q.hash)([(0,q.hash)(this.getValue()),this.language,this.metadata,this.internalMetadata]),this._hash)}}class S{constructor(c,a,t){this.uri=c,this.cells=a,this.metadata=t}acceptModelChanged(c){c.rawEvents.forEach(a=>{if(a.kind===O.NotebookCellsChangeType.ModelChange)this._spliceNotebookCells(a.changes);else if(a.kind===O.NotebookCellsChangeType.Move){const t=this.cells.splice(a.index,1);this.cells.splice(a.newIdx,0,...t)}else if(a.kind===O.NotebookCellsChangeType.Output){const t=this.cells[a.index];t.outputs=a.outputs}else if(a.kind===O.NotebookCellsChangeType.ChangeLanguage){const t=this.cells[a.index];t.language=a.language}else if(a.kind===O.NotebookCellsChangeType.ChangeCellMetadata){const t=this.cells[a.index];t.metadata=a.metadata}else if(a.kind===O.NotebookCellsChangeType.ChangeCellInternalMetadata){const t=this.cells[a.index];t.internalMetadata=a.internalMetadata}})}_spliceNotebookCells(c){c.reverse().forEach(a=>{const r=a[2].map(i=>new L(i.handle,i.source,i.language,i.cellKind,i.outputs,i.metadata));this.cells.splice(a[0],a[1],...r)})}}class P{constructor(c){this.textModel=c}getElements(){const c=new Int32Array(this.textModel.cells.length);for(let a=0;a<this.textModel.cells.length;a++)c[a]=this.textModel.cells[a].getComparisonValue();return c}getCellHash(c){const a=Array.isArray(c.source)?c.source.join(`
`):c.source;return(0,q.hash)([(0,q.hash)(a),c.metadata])}}e.CellSequence=P;class b{constructor(){this._models=Object.create(null)}dispose(){}acceptNewModel(c,a){this._models[c]=new S(M.URI.parse(c),a.cells.map(t=>new L(t.handle,t.source,t.language,t.cellKind,t.outputs,t.metadata)),a.metadata)}acceptModelChanged(c,a){const t=this._models[c];t&&t.acceptModelChanged(a)}acceptRemovedModel(c){!this._models[c]||delete this._models[c]}computeDiff(c,a){const t=this._getModel(c),r=this._getModel(a);return{cellsDiff:new A.LcsDiff(new P(t),new P(r)).ComputeDiff(!1)}}_getModel(c){return this._models[c]}}e.NotebookEditorSimpleWorker=b;function T(w){return new b}e.create=T})}).call(this);

//# sourceMappingURL=https://ticino.blob.core.windows.net/sourcemaps/82a8bec63666b0883d9bf762ee2aaa87e9be9a3a/core/vs/workbench/contrib/notebook/common/services/notebookSimpleWorker.js.map
